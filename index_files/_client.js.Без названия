!function(){"use strict";function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}).apply(this,arguments)}async function i(t){try{const e=new Image;return"decode"in e?(e.src=t,await e.decode(),!0):await new Promise((i=>{e.onload=()=>i(!0),e.onerror=()=>i(!1),e.src=t}))}catch(t){return!1}}flexbe_cli.block.register("ACADEMY_FEED",{lastItem:0,loading:!1,list:[],onScreen(t){t&&this.initFeed()},initFeed(){this.feedInited=!0,this.$loader=this.$area.find(".updates-loader");let t=-1,e=flexbe_cli.resize.viewportHeight,i=!1;const s=()=>{if(requestAnimationFrame(s),!this.tween||!this.inScreen||this.feedInited&&t===flexbe_cli.scroll.latest)return;t=flexbe_cli.scroll.latest,e=flexbe_cli.resize.viewportHeight,i=this.loaderState;const{top:n}=this.$loader.offset()||{};this.loaderState=t+e>=n-300,i!==this.loaderState&&this.loaderState&&this.loadFeed()};requestAnimationFrame(s)},loadFeed(t=(()=>{})){if(this.loading)return;this.loading=!0;const e=[];$.ajax({url:"/admin/updates/get_updates/",type:"POST",dataType:"json",data:{limit:5,last_id:this.lastItem}}).done((i=>{if(!i.is_success||!i.data)return void t(new Error(i.message));let s="",n=-1;i.data.forEach((t=>{const i=this.list.findIndex((e=>e.id==t.id));if(i>=0)n=i,this.list.splice(i,1,t);else{const i=-1===n?this.list.length:n;this.list.splice(i,0,t),e.splice(i,0,t)}})),e.forEach((t=>{s+='<div class="card-item"><div class="date-wrap"><span data-info="data" class="date">',s+=t.date,s+='</span></div><div class="line-wrap"><span class="line line-top"></span><span class="dot"></span><span class="line line-bottom"></span></div><div class="card-wrapper"><div class="img-card">',s+=`<img  data-info="img"  src="${t.image_retina}">`,s+=`</div><div class="info"><span  data-info="data"  class="mobile-date">${t.date}</span>`,s+=`<div  data-info="title"  class="title">${t.title}</div>`,s+=`<div  data-info="text"  class="text">${t.text}</div>`,t.buttons.length&&(s+='<div class="wrap-button">',t.buttons.forEach((t=>{s+=`<a href="${t.url}"`,s+=t.new_window?' target="_blank"':"",s+=` class="gubert-button blue fill select size-l">${t.title}</a>`})),s+="</div>"),s+="</div></div></div>"})),this.list.length&&this.$area.find(".updates-loader-wrap").removeClass("zero"),e.length&&this.$area.find(".cards-container").append(s),e.length<5&&(this.$area.find(".updates-loader-wrap").removeClass("active"),this.$area.find(".card-item:last-of-type .line.line-bottom").css("width","0")),this.loading=!1,this.lastItem=this.list[this.list.length-1].id})).fail((e=>{t(new Error(e)),this.loading=!1}))}});function s(t,e){let i=["screen"];return null!=t&&i.push(`(min-width: ${t}px)`),null!=e&&i.push(`(max-width: ${e}px)`),i=i.join(" and "),window.matchMedia(i).matches}const n={async init(){this.deviceInfo(),this.applyClasses(),await this.supportsInfo(),$(window).on("resize.deviceInfo",(()=>{this.deviceInfo()})),$(window).on("resized.deviceInfo",(()=>{this.applyClasses()}))},async supportsInfo(){const t=flexbe_cli.vars._group.images||{},[e,s]=await Promise.all([t.webp_support||i("data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"),t.avif_support||i("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")]);t.webp_support=e,t.avif_support=s},deviceInfo(){var t,e;const i=null==(t=window.CSS)?void 0:t.supports("zoom",1),n=navigator.userAgent.toLowerCase();this.is_responsive=!!flexbe_cli.vars._page.responsive,this.is_screen_mobile=s(0,767),this.is_screen_mobile_scaled=i&&s(0,399),this.is_screen_desktop=s(768,1e4),this.is_screen_desktop_scaled=i&&s(768,1279),this.is_touch=window.matchMedia("(any-pointer: coarse)").matches,this.is_pointer=window.matchMedia("(any-hover: hover)").matches,this.is_tablet=/ipad|xoom|kindle|playbook|tablet/i.test(n),this.is_mobile=!this.is_tablet&&-1!==n.indexOf("mobile"),this.is_desktop=!this.is_mobile&&!this.is_tablet,this.is_chrome=/(chromium|chrome)\/(\d+)/.test(n),this.is_safari=-1!==n.indexOf("safari")&&(null==(e=n.match(/version\/(\d+)/))?void 0:e[1]),this.is_firefox=-1!==n.indexOf("firefox"),this.is_mobile_ie=-1!==n.indexOf("iemobile"),this.is_ie=-1!==n.indexOf("trident")||-1!==n.indexOf("msie"),this.is_EDGE=-1!==n.indexOf("edge"),this.is_OSX=/ipad|iphone|ipod|macintosh/gi.test(n),this.is_android=-1!==n.indexOf("android"),this.is_ios=this.is_OSX&&this.is_touch&&!this.is_desktop,this.is_bot=/bot|aolbuild|bingpreview|msnbot|baidu|duckduckgo|mediapartners-google|teoma|slurp/gi.test(n),this.is_instagram=/instagram/i.test(n),this.is_mobile&&this.is_touch?this.device_type="mobile":this.is_tablet&&this.is_touch?this.device_type="tablet":this.device_type="desktop"},applyClasses(){const t=$(document.body);t.toggleClass("is-mobile",n.is_mobile),t.toggleClass("is-tablet",n.is_tablet),t.toggleClass("is-desktop",n.is_desktop),t.toggleClass("is-pointer",n.is_pointer),t.toggleClass("is-touch",n.is_touch),t.toggleClass("is-ios",!!n.is_ios),t.toggleClass("is-android",n.is_android),t.toggleClass("is-osx",n.is_OSX),t.toggleClass("is-safari",!!n.is_safari),t.toggleClass("is-edge",n.is_EDGE),t.toggleClass("is-firefox",n.is_firefox),t.toggleClass("is-chrome",n.is_chrome),t.toggleClass("is-instagram",n.is_instagram)}};let a;var o=new class{constructor(){t(this,"containerWidth",null),t(this,"oldWidth",null),t(this,"oldHeight",null),t(this,"resizeLocked",!1),t(this,"deviceWidth",null),t(this,"deviceHeight",null),t(this,"width",null),t(this,"height",null),t(this,"zoom",1)}get viewportWidth(){return Math.round(this.width/this.zoom)}get viewportHeight(){return Math.round(this.height/this.zoom)}init(){this.simulateWindowResized(),this.simulateDocumentResize(),this.updateSizes(),this.watchContainerSize(),this.applySizeVariablesOnResize()}trigger(t,e=window){$(e).trigger(t)}toggleMobileView(t){const e=t?400:document.documentElement.clientWidth,i=document.documentElement.clientHeight;this.lockResizeEvent(t),this.updateSizes({width:e,height:i}),this.trigger("resize"),this.trigger("resized")}lockResizeEvent(t){this.resizeLocked=t}updateSizes({width:t,height:e}={}){var i;const s=document.documentElement,a=s.clientWidth,o=s.clientHeight,r=null!=(i=this.scrollbarWidth)?i:window.innerWidth-a;if(null!=t||(t=this.resizeLocked?this.width:a),null!=e||(e=this.resizeLocked?this.height:o),this.oldWidth=this.deviceWidth,this.oldHeight=this.deviceHeight,this.scrollbarWidth=r,this.deviceWidth=a,this.deviceHeight=o,this.width=t,this.height=e,this.zoom=1,this.responsiveMode="desktop",!flexbe_cli.is_admin&&n.is_desktop&&("desktop"===this.responsiveMode&&n.is_screen_desktop_scaled||"mobile"===this.responsiveMode&&n.is_screen_mobile_scaled)){const e=400;this.zoom=t/e}}applySizeVariablesOnResize(){const t=$(document.documentElement),e=$(document.body),i=()=>{let i=this.viewportHeight;const s=flexbe_cli.is_admin?10:200;(flexbe_cli.is_admin||flexbe_cli.is_service)&&"mobile"===this.responsiveMode&&(i=Math.min(700,i)),t.css("--100vw",`${this.viewportWidth}px`),t.css("--100vh",`${this.viewportHeight}px`),t.css("--zoomLevel",`${this.zoom}`),t.css("--scrollbarWidth",`${this.scrollbarWidth}px`),(!this.coverHeight||Math.abs(this.coverHeight-i)>s)&&(this.coverHeight=i,t.css("--coverHeight",`${i}px`)),e.toggleClass("adaptive-mobile","mobile"===this.responsiveMode),e.toggleClass("adaptive-desktop","desktop"===this.responsiveMode)};i(),$(window).on("resized.setVars",(()=>i()))}watchContainerSize(){const t=()=>{const t=document.createElement("div");t.classList.add("container"),requestAnimationFrame((()=>{document.body.appendChild(t),this.containerWidth=t.offsetWidth,document.body.removeChild(t)}))};t(),$(window).on("resized.setContainer",(()=>t()))}simulateWindowResized(){let t,e=this.oldWidth,i=this.oldHeight;$(window).on("resize orientationchange",(s=>{s.originalEvent&&(this.updateSizes(),clearTimeout(t),t=setTimeout((()=>{this.oldWidth=e,this.oldHeight=i,e=this.deviceWidth,i=this.deviceHeight,this.trigger("resized")}),80))}))}simulateDocumentResize(){requestAnimationFrame((()=>{this.documentHeight=document.body.offsetHeight}));const t=flexbe_cli.is_admin?500:150,e=(t=0)=>{const e=document.body.offsetHeight;Math.abs(e-this.documentHeight)>=5&&(this.documentHeight=e,this.trigger("documentresize",document),clearTimeout(a),a=setTimeout((()=>{this.trigger("documentresized",document)}),t))};if("function"==typeof ResizeObserver){let i=!0;new ResizeObserver((()=>{i?i=!1:e(t)})).observe(document.querySelector("body"))}else setInterval((()=>{e(0)}),t)}};class r{constructor(e){t(this,"selectedTab",window.location.hash.replace(/^#tab/,"")),t(this,"interacted",!1),this.opts=e,this.$area=e.$area,this.dataAttr=e.dataAttr,this.classContainer=e.classContainer,this.id=e.id,this.$area.on("bringIntoView",(t=>{const e=$(t.target).closest(`[${this.dataAttr}]`).attr(`${this.dataAttr}`);this.tabInited||this.initTabs(),this.selectTab(e)}))}initTabs(){if(this.$mainContainer="self"===this.classContainer?this.$area:this.$area.find(this.classContainer),this.$tabsContainer=this.$area.find(".container-tabs"),this.$tabsList=this.$area.find('[role="tablist"]'),this.$swiperHelper=this.$area.find(".tab-swiper-helper"),!this.$tabsList.length)return void(this.tabInited=!1);this.tabInited=!0,this.$tabs=this.$tabsList.find('[role="tab"]'),this.$sections=this.$mainContainer.find('[role="tabpanel"]');let t=this.selectedTab&&this.$tabs.filter(`[${this.dataAttr}="${this.selectedTab}"]`);if(t&&t.length||(t=this.$tabs.eq(0)),this.normalizeLines(),this.selectTab(t.attr(`${this.dataAttr}`),{force:!0}),setTimeout((()=>{this.$mainContainer.addClass("main-area--tabs-inited")}),150),this.$tabsContainer.on("click",".tab",(t=>{const e=$(t.currentTarget).closest(`[${this.dataAttr}]`).attr(`${this.dataAttr}`);e&&(this.selectTab(e),this.setHash())})),this.$tabsList.on(`touchstart.${this.id}`,(()=>{this.interacted=!0,this.destroySwipeAnimation()})),flexbe_cli.is_admin){let t;this.$tabsContainer.on("mouseenter",".tab",(e=>{clearTimeout(t),1===e.buttons&&(t=setTimeout((()=>{const t=$(e.target).closest(`[${this.dataAttr}]`).attr(`${this.dataAttr}`);this.selectTab(t),this.setHash()}),700))})),this.$tabsContainer.on("mouseleave",".tab",(()=>{clearTimeout(t)}))}}tabListOnScreen(){if(!this.tabInited)return!1;const{top:t,height:e}=this.$tabsList[0].getBoundingClientRect();return t>0&&t+e<o.viewportHeight}swipeAnimationController(){if(!this.tabInited)return;const t=this.$tabsList[0]&&this.$tabsList[0].scrollWidth>this.$tabsList[0].clientWidth,e=this.tabListOnScreen();t&&e?this.initSwiperAnimation():e||this.destroySwipeAnimation()}initSwiperAnimation(){this.$swiperHelper.hasClass("show")||this.interacted||this.$swiperHelper.addClass("show")}destroySwipeAnimation(){this.$swiperHelper.hasClass("show")&&this.$swiperHelper.removeClass("show")}selectTab(t,{force:e}={}){if(!this.tabInited||!t)return;if(!e&&this.selectedTab===t)return;this.selectedTab=t;const i=this.$tabs.filter(`[${this.dataAttr}="${this.selectedTab}"]`),s=this.$sections.filter(`[${this.dataAttr}="${this.selectedTab}"]`),n=this.$sections.filter(".active"),a=n[0]&&n[0].offsetTop;this.scrollToTab(i),this.$tabs.removeClass("active").attr("aria-selected",!1).attr("tabindex",-1),i.addClass("active").attr("aria-selected",!0).attr("tabindex",0),this.$sections.removeClass("active").prop("hidden",!0),s.addClass("active").prop("hidden",!1);const o=s[0]&&s[0].offsetTop;if(this.$activeTab=i,this.$activeSection=s,"function"==typeof this.opts.onSelectTab&&this.opts.onSelectTab(),!flexbe_cli.run.is_mobile&&null!=a&&null!=o&&Math.abs(a-o)>0&&"undefined"!=typeof anime){const t=this.$mainContainer,e=a-o;t.css("will-change","transform"),anime({targets:t[0],translateY:[e,0],duration:250,easing:"easeOutCubic",complete:()=>{t.css({transform:"","will-change":""})}})}}normalizeLines(){if(!this.tabInited)return;let t;const e=this.$tabs;this.$tabsList.find(".tab-spacer").remove(),e.removeClass("first-in-line last-in-line"),e.first().addClass("first-in-line"),e.last().addClass("last-in-line"),e.each(((e,i)=>{t&&t.offsetTop!==i.offsetTop&&($(i).addClass("first-in-line"),$(t).addClass("last-in-line"),$(t).after('<span class="tab-spacer"></span>')),t=i}))}scrollToTab(t){if(!this.tabInited)return;const e=this.$tabsList,i=e[0].scrollWidth;if(i>e[0].offsetWidth){const s=t[0].offsetLeft,n=t[0].getBoundingClientRect(),a=o.viewportWidth;let r;n.width>a||n.left<20?r=s-20:n.right>a-20&&(r=s-(a-20-n.width)),null!=r&&(r=Math.max(0,Math.min(i-a,r)),e.animate({scrollLeft:r},{duration:250}))}}setHash(){const t=this.$activeSection.find("._anchor").eq(0).attr("name");this.currentAnchor=t,t&&(flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,`#${t}`),flexbe_cli.is_admin&&window.parent.history.replaceState(null,null,`#${t}`),flexbe_cli.lockPopstate=!1)}resetHash(){if(!this.tabInited)return;String(window.location.hash).replace(/^#{1,2}/,"")===this.currentAnchor&&(flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,"#"),flexbe_cli.lockPopstate=!1)}}flexbe_cli.block.register("BUNDLE",{subscribedOnscroll:!1,onInit(){this.createTabs()},onUpdate({templateRendered:t}){t&&this.createTabs()},onLoad(){this.tabsController&&this.inScreen&&this.tabsController.swipeAnimationController()},onResize(){this.tabsController&&this.tabsController.normalizeLines()},onBeside(t){this.tabsController&&(t?this.tabsController.initTabs():this.tabsController.resetHash())},onScreen(t){this.tabsController&&(t&&!this.subscribedOnscroll?(this.subscribedOnscroll=!0,$(document).on(`scroll.${this.id}`,(()=>{requestAnimationFrame((()=>{if(!this.tabsController)return this.subscribedOnscroll=!1,void $(document).off(`scroll.${this.id}`);this.tabsController.swipeAnimationController()}))}))):t||(this.subscribedOnscroll=!1,$(document).off(`scroll.${this.id}`)))},createTabs(){this.$area.find(".layout-type-tabs").length?this.tabsController=new r({$area:this.$area,dataAttr:"data-item-uid",onSelectTab:this.updateTween.bind(this),id:this.id,classContainer:".main-area"}):this.tabsController=null}}),flexbe_cli.block.register("LOGO",{onUpdate(t={}){setTimeout((()=>{var e;const i=null==(e=flexbe_cli.components.getInstances(this).filter((t=>"cards"===t.is)))?void 0:e[0],s=i&&i.swiper;if(!s)return!1;if(t.templateRendered&&t&&"items_add"===t.reason){const e=s.realIndex,i=t.reasonData.to;let n=e;e+s.params.slidesPerView<=i&&(n=i-s.params.slidesPerView+1),n!==e&&s.slideTo(n)}t.styleRendered&&s.update(!1)}),100)}}),flexbe_cli.block.register("PRODUCTS",{}),flexbe_cli.block.register("_flexbe_logomaker",{require:["/_s/lib/colorpicker/less/colorpicker.css","/_s/lib/riot3/riot.min.js?v3.13.3"],status:!1,defaults:{icon:{type:"icon",content:'<g id="Layer" transform="translate(-5.704697782534439, -6.040268459955536) scale(1.1185682135704738)"><path fill="currentColor" d="M64.5,39l5.4,5.4l4.9-4.8l3.4-3.4l16.3-16.3l-3.4-3.4L74.8,32.8l-2.1-2.1L90,13.4L86.6,10L69.3,27.3  l-2.2-2.2L83.4,8.8L80,5.4L63.7,21.7l-3.4,3.4l-4.9,4.9l5.4,5.4L51,44.3L13.7,6.9L8.8,18.9l26.7,39.4L5.1,85.6l9.2,9.2l26.1-29  l0.4,0.5l10.6,2.2l4.6-3.4L81,92.7l9.2-9.2L55.6,48.8L64.5,39z M71.3,36.2l-1.4,1.5l-7.7-7.7l1.4-1.4l3.8,3.8L71.3,36.2z M14.1,87.7  l-2-1.9L31.9,68L14.1,87.7z M81.2,85.7L56.6,58.6l-6.4,4.7l-6.6-1.4L14.2,18.3l1.2-2.8l68,68L81.2,85.7z"></path></g>',fill:"#AFA479",scale:[.698635477582846,.698635477582846],left:1052,top:365,width:70,height:70,iconId:80602,id:"icon",bounds:{v:[219,269.5,320],h:[145,202,259]},freeScale:!1,shiftKey:!1},title:{type:"text",content:"LA FAMILIA",fill:"#000000",scale:[1.5783128042446393,1.5783128042446393],font:"Oswald",style:"normal",weight:"bold",left:991,top:443,width:190,height:70,id:"title",bounds:{v:[106,269.5,433],h:[269,307.5,346]},shiftKey:!1},subtitle:{type:"text",content:"Restaurant",fill:"#7D7D7D",scale:[.7299931624726091,.7299931624726091],font:"Cormorant Garamond",style:"normal",weight:"normal",left:1046,top:521,width:96,height:26,id:"subtitle",bounds:{v:[165,272,379],h:[342,357,372]},shiftKey:!1}},translations:{ru:{authorship:'Автор иконки <a href="%link%" target="_blank">%name%</a> в <a href="https://thenounproject.com/" target="_blank">The Noun Project</a>',browser_support:"Браузер не поддерживает</br>«Конструктор логотипов»",browser_reason:"Причина в браузере",browser_advice:"Для комфортной работы мы рекомендуем</br>установить последнюю версию одного</br>из перечисленных браузеров.",device_support:"Устройство не поддерживает</br>«Конструктор логотипов»",device_reason:"Причина в устройстве",device_advice:"Для комфортной работы мы рекомендуем</br>использовать компьютер.",logo_name:"Название",logo_tagline:"Слоган",search:"Поиск иконки",save:"Скачать логотип",searh_placeholder:"Например: кошка",no_icon:"Без иконки",no_ico_search:"Мы не нашли иконок по вашему запросу",layout_to_top:"Лого сверху",layout_to_bottom:"Лого снизу",layout_to_left:"Лого слева",layout_to_right:"Лого справа",lock_message_title:"Добавьте текст",lock_message_desc:"Из-за ограничения лицензии The Noun Project логотип должен содержать текст",lock_message_btn:"Понятно",colorpicker_title:"Цвет",colorpicker_done:"Готово"},en:{authorship:'Icon by <a href="%link%" target="_blank">%name%</a> from <a href="https://thenounproject.com/" target="_blank">The Noun Project</a>',browser_support:"Browser don't support</br>«Logo constructor»",browser_reason:"The reason in the browser",browser_advice:"For comfortable work, we recommend</br>that you install the latest version of one</br>of the listed browsers",device_support:"Device don't support</br>«Logo constructor»",device_reason:"The reason in the device",device_advice:"For comfortable work, we recommend</br>to use PC or Mac.",logo_name:"Company name",logo_tagline:"Tagline",search:"Search",save:"Download logo",searh_placeholder:"Example: cat",no_icon:"No icon",no_ico_search:"We didn’t find any icons",layout_to_top:"Logo top",layout_to_bottom:"Logo bottom",layout_to_left:"Logo left",layout_to_right:"Logo right",lock_message_title:"Add text",lock_message_desc:"Due to license restrictions of The Noun Project, the logo should contain text.",lock_message_btn:"Got it",colorpicker_title:"Color",colorpicker_done:"Done"}},onInit(){this.$fluid=$(".container-fluid",this.$area),this.$container=$(".container",this.$fluid),this.lang=this.$container.attr("lang");const t=flexbe_cli.run,e=this.getLocale(this.lang);if(this.$area.prevAll(".b_block").eq(0).is("[data-b-type*=header]")){const t=this.$area.prevAll(".b_block").eq(0).find(".container-fluid").outerHeight();this.$fluid.css("maxHeight",`calc(100% - ${parseInt(t,10)}px)`)}return t.is_screen_mobile||t.is_mobile_ie?(this.$container.addClass("no-support device"),this.$container.find(".no-support__block__title").html(e.device_support),this.$container.find(".no-support__message__title").html(e.device_reason),this.$container.find(".no-support__message__text").html(e.device_advice),this.$fluid.addClass("loaded"),this.noSupport=!0,!1):t.is_EDGE||t.is_ie?(this.$container.addClass("no-support browser"),this.$container.find(".no-support__block__title").html(e.browser_support),this.$container.find(".no-support__message__title").html(e.browser_reason),this.$container.find(".no-support__message__text").html(e.browser_advice),this.$fluid.addClass("loaded"),this.noSupport=!0,!1):void 0},onLoad(){if(this.noSupport)return!1;flexbe_cli.require(["/_s/build/LM_site.js"],(()=>this.runLM()))},runLM(){const t=this.defaults,e={locale:this.getLocale(this.lang)};window.LM.render(this.$container.get(0),t,e),window.LM.control.trigger("ve_LM_layout_contain"),setTimeout((()=>{window.LM.control.trigger("ve_LM_layout_contain"),this.$fluid.addClass("loaded")}),300)},onResize(){window.LM&&window.LM.control.trigger("ve_LM_layout_center")},getLocale(){return this.translations[this.lang]||this.translations.en}}),flexbe_cli.block.register("_flexbe_tariff",{require:["/_s/lib/anime/anime.min.js?321"],currency:"USD",currencies:{RUB:/RU/,EUR:/AX|AD|AT|BE|CY|EE|FI|FR|GF|TF|DE|GR|GP|VA|IE|IT|LV|LT|LU|MT|MQ|YT|MC|ME|NL|PT|RE|BL|MF|PM|SM|SK|SI|ES/,USD:/.*/},onLoad(){this.$plans=this.$area.find(".plan-item"),this.$variants=this.$area.find(".plan-variant"),this.setCurrencyFromCookie(),this.setPeriod(),this.bindEvents(),this.updatePlans(!0)},bindEvents(){const t=this.$area.find(".subscribe-select"),e=this.$area.find(".advantage.has-variants"),i=this.$area.find(".plan-variants"),s=this.$area.find(".advantage-tip-icon"),n=()=>{$(document).off("click.close-advantage"),e.removeClass("expand")};t.on("click","[data-range]",(t=>{const e=$(t.currentTarget).attr("data-range");this.setPeriod(e),this.updatePlans()})),e.on("click",(t=>{(t=>{t.hasClass("expand")||(t.addClass("expand"),setTimeout((()=>{$(document).off("click.close-advantage").on("click.close-advantage",(t=>{$(t.target).closest(".plan-variants").length||n()}))}),20))})($(t.currentTarget))})),i.on("click",".plan-variant",(t=>{t.preventDefault(),t.stopPropagation();const e=$(t.currentTarget).attr("data-plan"),i=this.$plans.filter(`[data-plan-id="${e}"]`),s=i.attr("data-variant-id");i.removeClass("is-variant"),i.siblings(`[data-variant-id="${s}"]`).addClass("is-variant"),n(),this.updatePlans()})),s.on("mouseover",(t=>{const e=t.currentTarget.getBoundingClientRect(),i=$(t.currentTarget).find(".advantage-tip"),s=i[0].getBoundingClientRect(),n=flexbe_cli.resize.viewportWidth;i.removeClass("top"),i.removeClass("bottom"),i.removeClass("left"),i.removeClass("right"),e.top>s.height+25?i.addClass("top"):i.addClass("bottom"),n-e.x-14<140&&i.addClass("left"),e.x+window.pageXOffset<140&&i.addClass("right")})),flexbe_cli.events.on("update_currency",(()=>{this.setCurrencyFromCookie(),this.setPeriod(this.period),this.updatePlans(),flexbe_cli.scroll.toElement(this.$area)}))},setPeriod(t="m1"){this.period=t,this.$area.find(".subscribe-select li").removeClass("active").filter(`[data-range=${t}]`).addClass("active"),"RUB"===this.currency||"m3"!==this.period?this.$area.find(".subscribe-select .slider").removeClass().addClass(`slider ${t}`):this.setPeriod("m1")},setCurrencyFromCookie(){const t=this.$area.find(".tariffs__wrapper"),e=t.is(".lang-ru")?"ru":"en",i="ru"===e?"RU":window.getCookie("f_country")||"US";let s=window.getCookie("f_currency")||Object.keys(this.currencies).find((t=>this.currencies[t].test(i)));Object.keys(this.currencies).includes(s)||(s="ru"===e?"RUB":"USD"),t.attr("data-currency",s),this.currency=s},getCurrencyParams(){let t,e;switch(this.currency){case"RUB":t={str:":value :symbol",t:" ",d:","},e={code:"RUB",symbol:"₽",decimals:2};break;case"EUR":t={str:":symbol:value",t:",",d:"."},e={code:"EUR",symbol:"€",decimals:2};break;default:t={str:":symbol:value",t:",",d:"."},e={code:"USD",symbol:"$",decimals:2}}return{currencyFormat:t,currencyData:e}},updatePlans(t=!1){const{currencyFormat:e,currencyData:i}=this.getCurrencyParams(),s=this.period,n=this.currency.toLowerCase(),a=this.$plans,o=this.$variants;a.each(((a,o)=>{const r=$(o),l=r.find(".plan-price"),c=r.find(".plan-title"),d=r.data("plan"),h=d.prices[n]||{};c.text(d.title);const u=flexbe_cli.locale.parseMoney(l.text())||0,p=h[s],m={value:u},f=Math.abs(u-p)>100,g=f?"easeInOutExpo":"linear",b=f?600:180;if(t){const t=flexbe_cli.locale.formatMoney(h.m1,{currencyFormat:e,currencyData:i});l.text(t)}else anime({targets:m,value:p,duration:b,easing:g,update:()=>{const t=Math.floor(m.value),s=flexbe_cli.locale.formatMoney(t,{currencyFormat:e,currencyData:i});l.text(s)}})})),o.each(((t,o)=>{const r=$(o),l=r.attr("data-plan"),c=a.filter(`[data-plan-id="${l}"]`).data("plan").prices[n][s],d=flexbe_cli.locale.formatMoney(c,{currencyFormat:e,currencyData:i});r.find(".plan-variant--price").text(d)})),a.removeAttr("data-plan")}}),flexbe_cli.element.register("_flexbe_lang_cur",{onLoad(){const t=this.$area.find(".languages").data("language"),e=getCookie("f_currency")||("ru"===t?"RUB":"USD"),i=this.$area.find(".simple-select"),s=this.$area.find(".currency .option"),n=this.$area.find(".currency-variants");this.current={USD:"$ - USD",EUR:"€ - EUR",RUB:"₽ - RUB"},s.text(this.current[e]),i.on("click",".option",(t=>{const e=$(t.delegateTarget).hasClass("active");e||(t.preventDefault(),t.stopPropagation(),this.$area.find(".active").removeClass("active")),$(document).on("click",(()=>{$(document).find(".simple-select.active").removeClass("active"),$(document).off("click")})),$(t.delegateTarget).toggleClass("active",!e)})),n.on("click",".currency-variant",(t=>{const e=$(t.currentTarget).attr("data-currency");s.text(this.current[e]),setCookie("f_currency",e),flexbe_cli.events.emit("update_currency",{currency:e})}))}}),flexbe_cli.element.register("contacts01",{onInit(){this.initNodes(),this.fixDesc()},onUpdate(){this.initNodes(),this.fixDesc()},onMsg(t){"change_contact"===t&&this.fixDesc()},initNodes(){this.$desc=this.$area.find(".element-text--desc"),this.$icon=this.$area.find(".component-icon"),this.$contact=this.$area.find(".element-text--contact")},fixDesc(){if(this.$desc.length&&this.$icon.length){const t=this.$contact[0].offsetHeight,e=this.$icon[0].offsetHeight;if(t>e){const i=t/2-e/2;this.$icon.css("margin-top",`${i}px`)}else this.$icon.css("margin-top","")}}}),flexbe_cli.element.register("header_cart",{$headerCart:null,$cartDropdown:null,showDropdown:!1,forbidDropdownClose:!1,needed:!1,editorHasList:!1,openTimer:null,closeTimer:null,eventId:null,get cartStore(){return flexbe_cli.ecommerce.cartStore},onInit(){this.$headerCart=this.$area.find(".header-cart-button-holder"),this.eventId=`${this.id}`,this.events(),flexbe_cli.is_admin&&this.manageDropdownInEditor(),this.setCartData()},onUpdate({entity:t,path:e}){e&&(t&&e.includes("zone")&&(this.$headerCart=t.$area.find(".header-cart-button-holder"),this.setCartData()),null!=this.$cartDropdown&&t&&e.includes("button")&&this.renderButton()),this.onInit()},events(){if(this.cartStore.off(`dispatch.header-cart-${this.eventId}`).on(`dispatch.header-cart-${this.eventId}`,((t,{name:e})=>{if("addItem"===e){const t=this.$area.find(".header-cart-button");t.removeClass("blink"),t.outerWidth(),t.addClass("blink")}this.setCartData()})),!flexbe_cli.is_admin){const t=this.$area,e="true"===this.$headerCart.attr("data-show-product-list"),i="mobile"===flexbe_cli.resize.responsiveMode;t.on(`mouseenter.${this.eventId}`,(()=>{clearTimeout(this.closeTimer),this.showDropdown||!e||i||(this.openTimer=setTimeout((()=>this.openDropdown()),150))})),t.on(`mouseleave.${this.eventId}`,(()=>{clearTimeout(this.openTimer),this.showDropdown&&(this.closeTimer=setTimeout((()=>this.closeDropdown()),150))})),document.addEventListener("scroll",(()=>{this.showDropdown&&this.closeDropdown()}),{passive:!0}),window.addEventListener("blur",(()=>{this.showDropdown&&this.closeDropdown()})),this.$headerCart.off("click").on("click",(()=>{flexbe_cli.events.emit("ui_cart_open")}))}},dropdownEvents(){"true"===this.$headerCart.attr("data-show-product-list")&&null!=this.$cartDropdown&&this.$cartDropdown.length&&(this.$cartDropdown.on(`mouseenter.${this.eventId}`,(()=>{clearTimeout(this.closeTimer)})),this.$cartDropdown.on(`mouseleave.${this.eventId}`,(()=>{this.showDropdown&&!this.forbidDropdownClose&&(this.closeTimer=setTimeout((()=>this.closeDropdown()),150))})),this.$cartDropdown.off("click.header-cart-products-list-button").on("click.header-cart-products-list-button",".header-cart-products-list-button",(()=>{flexbe_cli.events.emit("ui_cart_open"),this.closeDropdown()})))},manageDropdownInEditor(){new MutationObserver((t=>{let e;this.editorHasList=this.$headerCart.hasClass("has-list"),t.forEach((t=>{const i=t.target&&$(t.target).hasClass("editor-focus"),s=$(".header-cart-products-list-content");clearTimeout(e),e=setTimeout((()=>{i?this.editorHasList?this.showDropdown||(this.forbidDropdownClose=!0,this.openDropdown()):this.showDropdown&&(this.showDropdown=!1,this.forbidDropdownClose=!1,s.remove()):this.showDropdown&&(this.showDropdown=!1,this.forbidDropdownClose=!1,s.remove(),this.editorHasList=!1)}),50)}))})).observe(this.$area[0],{attributes:!0,attributeFilter:["class"],attributeOldValue:!1,characterData:!1,childList:!1,subtree:!1})},openDropdown(){const t="true"===this.$headerCart.attr("data-show-product-list");if(!("mobile"===flexbe_cli.resize.responsiveMode)&&!this.showDropdown&&t){const t=$(".header-cart-products-list-holder"),{top:e,left:i}=this.$headerCart.offset(),s=this.$headerCart.outerWidth(),n=this.$headerCart.outerHeight();t.length&&(t.remove(),this.$cartDropdown=null),this.$cartDropdown=$(`<div class="header-cart-products-list-holder" data-id="dropdown_${this.id}"></div>`),$("body").append(this.$cartDropdown),this.showDropdown=!0,this.renderDropdownList(),this.dropdownEvents();const a=this.$cartDropdown.outerWidth(),o=e+n;let r=i+s/2-a/2;r<=0?r=i:i+a>=flexbe_cli.resize.viewportWidth&&(r=i+s-a),this.$cartDropdown.css({left:r,top:o})}},closeDropdown(){const t=$(".header-cart-products-list-holder"),e=$(".header-cart-products-list-content");this.showDropdown=!1,e.addClass("fade-out"),setTimeout((()=>{e.remove(),t.remove(),this.$cartDropdown=null}),180)},renderDropdownList(){const t=this.cartStore.getList(),e=flexbe_cli.locale.tr("header_cart.title"),i=flexbe_cli.locale.tr("cart.total"),s=flexbe_cli.locale.tr("header_cart.empty"),n=`\n                <div class="header-cart-products-list-content" data-contrast="dark">\n                    <div class="header-cart-products-list-info">\n                        <span class="text-medium">${e}</span>\n                    </div> \n                    <ul class="header-cart-products-list">`,a=`\n                </ul>\n                <div class="header-cart-products-list-info">\n                    <span class="text-medium">${i}</span>\n                    <span class="text-medium">${flexbe_cli.locale.formatMoney(this.cartStore.getTotal())}</span>\n                </div>\n                <div class="header-cart-products-list-button"></div>\n            </div>`,o=`\n                    <div class="header-cart-products-list-content" data-contrast="dark">\n                        <div class="empty-text">${s}</div>\n                    </div>`;let r="";t&&t.length?(r+=n,t.forEach((t=>{r+=(t=>{const e=t.optionsInfo?t.optionsInfo.map((t=>t.name)).join(", "):"";return`<li class="header-cart-products-list-item" data-id="${t.id}">\n                        <span class="base-info">\n                            <span class="title">${t.title||"-"}</span>\n                            <span class="price text-gray">${t.count>1?`${t.count} x `:""}\n                                ${null==t.price?flexbe_cli.locale.tr("ecommerce::card::price::empty"):flexbe_cli.locale.formatMoney(t.price)}\n                            </span>\n                        </span>\n                        ${e?`<span class="variant-info">${e}</span>`:""}\n                    </li>`})(t)})),r+=a,this.$cartDropdown.html(r),this.renderButton()):this.$cartDropdown.html(o)},renderButton(){const t=this.$cartDropdown.find(".header-cart-products-list-button"),e=this.$area.find(".component-button");t.html(""),t.append(e.clone())},setCartData(){this.$headerCart.find(".header-cart-button-count").text(this.cartStore.getCount()),this.$headerCart.find(".header-cart-button-text .price").text(flexbe_cli.locale.formatMoney(this.cartStore.getTotal())),this.toggleSum(),this.toggleList()},toggleSum(){const t="true"===this.$headerCart.attr("data-show-sum")&&this.cartStore.getList().length>0;this.$headerCart.find(".header-cart-button-text .price").toggleClass("show",t),this.$headerCart.find(".header-cart-button-text .text").toggleClass("show",!t)},toggleList(){this.$headerCart.toggleClass("is-empty",0===this.cartStore.getList().length)}}),flexbe_cli.element.register("header_contacts",{onInit(){this.initNodes(),this.fixDesc()},onUpdate(){this.initNodes(),this.fixDesc()},onMsg(t){"change_contact"===t&&this.fixDesc()},initNodes(){this.$desc=this.$area.find(".element-text--desc"),this.$icon=this.$area.find(".component-icon"),this.$contact=this.$area.find(".element-text--contact")},fixDesc(){if(this.$desc.length&&this.$icon.length){const t=this.$contact[0].offsetHeight,e=this.$icon[0].offsetHeight;if(t>e){const i=t/2-e/2;this.$icon.css("margin-top",`${i}px`)}else this.$icon.css("margin-top","")}}}),flexbe_cli.element.register("media02",{onInit(){this.initElement()},onUpdate(){this.initElement()},onScreen(t){t&&this.needSetSize&&(this.setSize(),this.setClip(this.initial))},onResize(){this.inScreen?(this.setSize(),this.setClip(this.position)):this.needSetSize=!0},initElement(){this.needSetSize=!0,this.$box=this.$area.find(".state-container"),this.$before=this.$box.find(".state-before"),this.$after=this.$box.find(".state-after"),this.$handle=this.$box.find(".drag-handle"),this.direction=this.$box.attr("data-direction"),this.initial=this.$box.attr("data-initial")||50,this.position=this.initial,this.bindEvents()},bindEvents(){const t=this,{direction:e,$box:i}=this,s=i[0];let n,a,o,r,l=!1,c=!1;function d(e){if(flexbe_cli.scroll.inScroll)return;if((flexbe_cli.is_admin||"touchstart"===e.type)&&!e.target.closest(".drag-handle"))return;const c=i.closest(".swiper-inited")[0];c&&c.swiper&&!r&&(o=c.swiper,r=!0,o.detachEvents()),l=!0,a=s.getBoundingClientRect();const d=e.touches&&e.touches[0]||e;n=m(d,a),i.addClass("drag"),flexbe_cli.is_admin||t.setClip(n),document.body.addEventListener("mousemove",h),document.body.addEventListener("touchmove",h,{passive:!1},!1),window.addEventListener("mouseup",u),window.addEventListener("touchend",u,{passive:!1},!1),p(e)}function h(e){if(!l)return;const s=m(e.touches&&e.touches[0]||e,a),o=Math.abs(n-s);if(!c){if(o<.8)return;c=!0,i.addClass("resize")}t.setClip(s),p(e)}function u(){l=!1,c=!1,i.removeClass("drag resize"),document.removeEventListener("mousemove",h),document.removeEventListener("touchmove",h),document.removeEventListener("mouseup",u),document.removeEventListener("touchend",u),o&&r&&(r=!1,o.attachEvents())}function p(t){t.preventDefault(),t.stopPropagation()}function m(t,i){let s;return s="y"===e?(t.clientY-i.top)/i.height:(t.clientX-i.left)/i.width,100*s}this.$box[0].addEventListener("pointerdown",(t=>{t.stopPropagation()}),!1),s.addEventListener("mousedown",d,{passive:!1},!1),s.addEventListener("touchstart",d,{passive:!1},!1)},setSize(){const{direction:t}=this;let e=this.$box["y"===t?"innerHeight":"innerWidth"]();return e=Math.round(e),this.boxSize=e,this.needSetSize=!1,e},setClip(t){if(void 0===t)return;const{$before:e,$after:i,$handle:s}=this;this.position=Math.max(0,Math.min(100,t)),e.css({"--cropSize":`${this.position}%`,"--imageSize":`${this.boxSize}px`}),i.css({"--cropSize":100-this.position+"%","--imageSize":`${this.boxSize}px`}),s.css({"--handlePosition":`${this.position}%`}),this.clientInited||(this.clientInited=!0,this.$box.addClass("inited"))}}),flexbe_cli.element.register("rotator01",{$rotator:null,$list:null,$animationElement:null,eventId:null,animation:null,animationId:null,speed:null,delay:null,loop:null,animationSet:!1,animationStarted:!1,completedEvent:null,animeFunction:null,typedFunction:null,maxHeight:0,documentHidden:null,documentVisibilityChange:null,onInit(){this.events(),this.setInitParams()},onLoad(){!this.inView||this.animationSet||this.animationStarted||(this.animationSet=!0,this.setInitParams(),this.startAnimation())},onView(t){const e=this.animationSet&&this.animationStarted;this.loaded&&(t&&!e?(this.animationSet=!0,this.clearAnimation(),this.setInitParams(),this.startAnimation()):t&&e?this.restartAnimation():!t&&e&&this.pauseAnimation())},onResize(){this.setMaxHeight(),this.loaded&&0!==this.maxHeight&&(this.clearAnimation(),this.startAnimation())},onUpdate(){this.clearAnimation(),this.setInitParams()},events(){void 0!==document.hidden?(this.documentHidden="hidden",this.documentVisibilityChange="visibilitychange"):void 0!==document.msHidden?(this.documentHidden="msHidden",this.documentVisibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this.documentHidden="webkitHidden",this.documentVisibilityChange="webkitvisibilitychange"),document.addEventListener(this.documentVisibilityChange,this.handleVisibilityChange.bind(this),!1),flexbe_cli.events.on(`font_changed.${this.eventId}`,(()=>{this.setMaxHeight()}))},handleVisibilityChange(){this.animationSet&&this.animationStarted&&(document[this.documentHidden]?this.pauseAnimation():setTimeout((()=>this.restartAnimation()),100))},setInitParams(){this.$rotator=this.$area.find(".text-rotator"),this.$animationElement=this.$rotator.find(".text-animation"),this.animationId=this.$animationElement.attr("data-id"),"typing"===this.animationId?this.require=["/_s/lib/typed/typed.min.js"]:this.require=["/_s/lib/anime/anime.min.js?321"],this.eventId=`anim_${this.id}`,this.maxHeight=0,this.$rotator.addClass(this.eventId),this.setList(),this.setMaxHeight()},setList(){this.$list=this.$area.find(".animation-container").filter(((t,e)=>!!$(e).find(".animate")[0].innerText&&e)).each(((t,e)=>{const i=$(e).find(".animate")[0],s=i.innerText;i.innerHTML=s.replace(/(<[^>]+>)/g,"")}))},setMaxHeight(){null!=this.$list&&this.$list.length>0?(this.maxHeight=0,this.$list.each(((t,e)=>{const i=this.$area.closest(".modal-content").length>0,s=$(e).find(".animate")[0],n=s.innerText;i&&!this.inView?this.maxHeight="auto":"typing"!==this.animationId||this.animation?("counter"!==this.animationId&&this.breakToWordsAndLetters($(e)),this.maxHeight=Math.max(this.maxHeight,$(e).height()),s.innerHTML=n):(s.innerText=`${e.innerText}|`,this.maxHeight=Math.max(this.maxHeight,$(e).height()),s.innerText=e.innerText.slice(0,e.innerText.length-1))}))):this.maxHeight=+this.$rotator.attr("data-size"),this.$area.find(".rotator-holder").css("height",this.maxHeight)},setAnimationParams(){this.$rotator.removeClass("animation-stopped"),this.$rotator.addClass("to-animate"),this.speed=1/+this.$animationElement.attr("data-speed"),this.delay=1e3*+this.$animationElement.attr("data-delay"),this.loop="true"===this.$animationElement.attr("data-loop"),this.animation=this.parseAnimation()},startAnimation(){this.setAnimationParams();const t=this.$list&&this.$list.length>0||!1,e=this.animation&&this.animation.id||!1,i=this.animeFunction&&this.animeFunction.children||!1,s=this.typedFunction&&this.typedFunction.strings||!1;t&&e&&!this.animationStarted&&this.maxHeight>0&&(this.animationStarted=!0,"typing"===this.animation.id||i?s||this.startTypingAnimation():(this.$rotator.removeClass("to-animate"),this.playListItem(0)))},pauseAnimation(){const t=this.animeFunction&&this.animeFunction.children||!1,e=this.typedFunction&&this.typedFunction.strings||!1;"typing"===this.animationId&&e?this.typedFunction.stop():t&&this.animeFunction.pause()},restartAnimation(){const t=this.animeFunction&&this.animeFunction.children||!1,e=this.typedFunction&&this.typedFunction.strings||!1;"typing"===this.animationId&&e?this.typedFunction.start():t&&this.animeFunction.play()},playListItem(t){const e=$(this.$list[t]);e.addClass("active"),this.onAnimationStart({index:t,$target:e})},onAnimationStart({index:t,$target:e}){if(this.animation.steps&&this.animation.steps.length){const i=`.text-rotator.${this.eventId} .animation-container.active`;if(this.animation.replaceString){const t=e.find(".animate")[0],i=t.innerText;t.innerHTML=i.replace(/({.+})|(\[([^\]]+)])|(\S*\(([^)]+)\)\S{0,1})|\S+/g,"<span class='word'>$&</span>");const s="(?:[✀-➿]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]️?⃣|㊙|㊗|〽|〰|Ⓜ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|🆎|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|🈚|🈯|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‼|⁉|[▪-▫]|▶|◀|[◻-◾]|©|®|™|ℹ|🀄|[☀-⛿]|⬅|⬆|⬇|⬛|⬜|⭐|⭕|⌚|⌛|⌨|⏏|[⏩-⏳]|[⏸-⏺]|🃏|⤴|⤵|[←-⇿])",n=new RegExp(s,"g");let a;a=n.test(i)?new RegExp(`${s}|([^\\s])`,"g"):new RegExp("[^\\s]","g"),e.find(".word").each(((t,e)=>{e.innerHTML=e.innerText.replace(a,"<span class='letter'>$&</span>")}))}this.animeFunction=anime.timeline({loop:1}),this.animeFunction.id=this.eventId;const s=this.animation.steps.map((t=>this.parseStep({step:t,container:i})));this.loop||t!==this.$list.length-1||s.splice(1),s.forEach((t=>{this.animeFunction.add(t)})),this.animeFunction.play(),this.animeFunction.finished.then((()=>this.onAnimationFinished({index:t,$target:e}))).catch((t=>console.error(t)))}},onAnimationFinished({index:t,$target:e}){if("typing"!==this.animationId){const i=t>=this.$list.length-1;this.purgeCurrentInstance(),e.removeAttr("style"),e.find(".animate").removeAttr("style"),this.$rotator.find(".animation-container").removeClass("active"),i?this.loop?this.playListItem(0):(e.addClass("active"),this.clearAnimation(!1,"animation stop")):this.playListItem(t+1)}},startTypingAnimation(){if("function"!=typeof Typed)return;const t=`.text-rotator.${this.eventId} .typing.active .animate`,i=[],s=new RegExp("(?:[✀-➿]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]️?⃣|㊙|㊗|〽|〰|Ⓜ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|🆎|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|🈚|🈯|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‼|⁉|[▪-▫]|▶|◀|[◻-◾]|©|®|™|ℹ|🀄|[☀-⛿]|⬅|⬆|⬇|⬛|⬜|⭐|⭕|⌚|⌛|⌨|⏏|[⏩-⏳]|[⏸-⏺]|🃏|⤴|⤵|[←-⇿])","g");this.$list.find(".animate").each(((t,e)=>{const n=e.innerText;s.test(n)&&(e.innerHTML=n.replace(s,"`$&`")),i.push(e.innerText)})),this.$list.first().removeClass("active").clone().addClass("typing active").appendTo(this.$rotator),this.setList();const n=e({},this.animation,{strings:i});this.typedFunction=new window.Typed(t,n)},clearAnimation(t=!0){const e=this.animeFunction&&this.animeFunction.children||!1,i=this.typedFunction&&this.typedFunction.strings||!1;if(this.loaded&&"typing"!==this.animationId&&this.purgeCurrentInstance(),e&&(this.animeFunction=null),i){this.$rotator.find(".typing").remove(),this.setList(),this.typedFunction.destroy(),this.typedFunction=null}if(this.animation&&this.animation.id&&(this.animation=null,this.animationSet=!1),this.$rotator.length){const e=this.$rotator.find(".animation-container");this.$rotator.css("opacity",""),this.$rotator.addClass("animation-stopped"),e.length&&(e.removeClass("active"),t?(this.animationStarted=!1,e.first().addClass("active")):e.last().addClass("active"))}},purgeCurrentInstance(){const t=anime.running;let e;t.forEach(((t,i)=>{t.id===this.eventId&&(e=i)})),"number"==typeof e&&t.splice(e,1)},parseAnimation(){let t;if(this.$animationElement.attr("data-steps")){const e=this.$animationElement.attr("data-default-speed");if("typing"===this.animationId){const i=JSON.parse(JSON.parse(this.$animationElement.attr("data-steps")))[0];t={id:this.animationId,loop:this.loop,typeSpeed:Math.round(this.speed*i.typeSpeedFactor*e),backSpeed:Math.round(this.speed*i.backSpeedFactor*e),backDelay:Math.round(this.delay*i.backDelayFactor),contentType:null,preStringTyped:()=>{this.$rotator.removeClass("to-animate")},onStringTyped:t=>{this.loop||t!==this.$list.length-2||setTimeout((()=>{this.clearAnimation(!1)}),180)}}}else{t={defaultSpeed:e,steps:JSON.parse(JSON.parse(this.$animationElement.attr("data-steps"))),speed:this.speed,delay:this.delay,id:this.animationId,loop:this.loop,replaceString:"true"===this.$animationElement.attr("data-replace")}}}return t},parseStep({step:t,container:i}){return e({},t,{targets:`${i} ${t.targets}`,duration:this.getStepDuration(t),delay:this.getStepDelay(t)})},getStepDuration(t){return 0===t.duration?0:Math.round(this.speed*(t.durationFactor?t.durationFactor:t.duration)*this.animation.defaultSpeed)},getStepDelay(t){if(0===t.delay)return 0;const e=t.delayFactor?t.delayFactor:1;if(t.delay&&t.delay instanceof Object){const e=this.getStepDuration(t)*t.delay.factor;return t.delay.increment&&t.delay.add?(i,s)=>t.delay.add+e*(s+t.delay.incrementBy):t.delay.increment?(i,s)=>e*(s+t.delay.incrementBy):t.delay.add?(i,s)=>t.delay.add+e*s:(t,i)=>e*i}return Math.round(this.delay*e)},breakToWordsAndLetters(t){const e=t.find(".animate")[0],i=e.innerText;e.innerHTML=i.replace(/({.+})|(\[([^\]]+)])|(\S*\(([^)]+)\)\S{0,1})|\S+/g,"<span class='word'>$&</span>");const s="(?:[✀-➿]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]️?⃣|㊙|㊗|〽|〰|Ⓜ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|🆎|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|🈚|🈯|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‼|⁉|[▪-▫]|▶|◀|[◻-◾]|©|®|™|ℹ|🀄|[☀-⛿]|⬅|⬆|⬇|⬛|⬜|⭐|⭕|⌚|⌛|⌨|⏏|[⏩-⏳]|[⏸-⏺]|🃏|⤴|⤵|[←-⇿])",n=new RegExp(s,"g");let a;a=n.test(i)?new RegExp(`${s}|([^\\s])`,"g"):new RegExp("[^\\s]","g"),t.find(".word").each(((t,e)=>{e.innerHTML=e.innerText.replace(a,"<span class='letter'>$&</span>")}))}}),flexbe_cli.element.register("table01",{onInit(){this.needSetSize=!0},onMsg(t){"fix_width"===t&&this.fixColsWidth()},onScreen(t){t&&this.needSetSize&&this.updateSizes()},onResize(){this.inScreen?this.updateSizes():this.needSetSize=!0},onVisible({state:t}){t&&(this.needSetSize=t)},updateSizes(){this.needSetSize=!1,this.fixColsWidth(),this.fixAdaptiveColsWidth()},fixColsWidth(){const t=this.fixedCols,e=this.$area.find(".element-content--main .flexbe-table-container").eq(0),i=e.find(".flexbe-table"),s=i.find(".flexbe-table__row--first").find(".flexbe-table__cell"),n=s.length,a=window.pageYOffset;t&&e.css({"--tableWidth":""});const o=Math.min(e.innerWidth(),i.innerWidth());e.css("--tableWidth","0px");let r=s.toArray().map((t=>{let e=t.getAttribute("data-width"),i=!1;e&&"auto"!==e&&(i=!0,e=parseInt(e,10)||0),$(t).css("--colWidth",i?`${e}px`:"0px");const s=t.getBoundingClientRect();return{el:t,width:e,minWidth:Math.ceil(s.width),fixed:i}}));const l=u(r);r=r.map((t=>(!t.fixed&&t.minWidth>l.averageWidth&&(t.fixed=!0,t.width=t.minWidth),t)));const{averageWidth:c,fixedWidth:d,fixedCount:h}=u(r);if(r.forEach((({el:t,fixed:e,width:i,minWidth:s})=>{const n=e?i:c;$(t).css("--colWidth",`${Math.max(n,s)}px`)})),e.css({"--tableWidth":`${n===h?d:o}px`}),t){const t=i.outerWidth(),s=e[0].scrollLeft,n=Math.max(t-o,0);s>n&&(e[0].scrollLeft=n),window.scrollTo(0,a)}function u(t){const e=t.filter((t=>t.fixed)),i=e.length,s=n-i,a=e.reduce(((t,{width:e,minWidth:i})=>t+Math.max(e,i)),0);return{averageWidth:Math.floor((o-a)/s),fixedWidth:a,fixedCount:i}}this.fixedCols=!0},fixAdaptiveColsWidth(){const t=this.$area.find(".element-content--adaptive").find(".flexbe-table--adaptive-attrs");if(t.length){let e=t.eq(0).find(".flexbe-table__row").not(".flexbe-table__row--header, .flexbe-table__row--footer").eq(0).find(".flexbe-table__cell").toArray().map((t=>t.offsetWidth));const i=e.reduce(((t,e)=>t+e),0);e=e.map((t=>Math.round(t/i*100))),t.each(((t,i)=>{$(i).find("colgroup col").each(((t,i)=>{i.setAttribute("width",`${e[t]}%`)}))}))}this.fixedAdaptiveCols=!0}});const l={},c={};flexbe_cli.element.register("spoiler01",{onReady(){this.$list=this.$area.find(".spoiler-list"),this.$items=this.$area.find(".spoiler-list-item"),this.isSpoilered=+this.$list.attr("data-spoiler"),this.isAccordion=+this.$list.attr("data-accordion"),c[this.id]||(c[this.id]=this.$items.length),c[this.id]!==this.$items.length&&(l[this.id]=[],c[this.id]=this.$items.length),l[this.id]||(l[this.id]=[]),this.isSpoilered?(this.isAccordion&&l[this.id].length>1&&(l[this.id]=l[this.id].slice(0,1)),l[this.id].forEach((t=>{const e=t&&this.$list.find(`[uid="${t}"]`);e.length&&this.toggleSpoiler({$item:e,state:!0,duration:0,force:!0})}))):l[this.id]=[],this.bindEvents()},bindEvents(){if(!this.isSpoilered)return!1;const t=".clickable";let e;this.$list.on("mousedown",t,(t=>{e=(!flexbe_cli.is_admin||!$(t.target).closest(".element-text, .component-image, .editor-simple-handle").length)&&(!$(t.target).closest(".not-clickable").length&&{target:t.currentTarget,x:t.screenX,y:t.screenY})})),this.$list.on("mouseup",t,(t=>{if(!e||e.target!==t.currentTarget||flexbe_cli.is_admin&&$(t.target).closest(".element-text").length)return;Math.sqrt((e.x-t.screenX)**2+(e.y-t.screenY)**2)<5&&this.toggleSpoiler({$item:$(t.currentTarget)}),e=!1}))},toggleSpoiler({$item:t,state:e,force:i,duration:s}){let n=0;const a=t.attr("uid");void 0===e&&(e="true"!==t.attr("data-expanded")),e?l[this.id].find((t=>t===a))||l[this.id].push(a):l[this.id]=l[this.id].filter((t=>t!==a));const o=t.find(".collapsed");if(o[0].inAnimation&&!i)return;o[0].inAnimation=!0;const r=t.find(".spoiler-text"),c=r.find(".spoiler-text-content"),d=o[0].scrollHeight,h="number"==typeof s?s:Math.max(250,Math.min(400,3*d));if(e){n=(r.height()-c.innerHeight())/2,n<10&&c.css("margin",`${n}px 0`)}if(o.off("transitionend").one("transitionend",(()=>{o.css("height","").toggleClass("collapsed--auto",e),o[0].inAnimation=!1})),o.css({height:`${d}px`,transitionDuration:`${h}ms`}),o[0].offsetHeight,o.toggleClass("collapsed--show",e),e||o.css("height","0"),t.attr("data-expanded",e),this.isAccordion&&e){t.siblings("[data-expanded=true]").each(((t,e)=>this.toggleSpoiler({$item:$(e),state:!1,force:!0})))}}}),flexbe_cli.element.register("text01",{}),flexbe_cli.element.register("timer01",{sizes:{xs:33,s:40,m:55,l:80,xl:120,xxl:160,xxxl:1/0},onResize(){this.setTimerSize()},onBeside(t,e){t&&e&&this.setTimerSize()},setTimerSize(){const t=this.$area.find(".component-timer"),e=t.find(".number").length,i=.8*t.find(".colon").length,s=t.outerWidth()/(i+e),n=Object.keys(this.sizes).find((t=>this.sizes[t]>s));t.attr("data-size",n)}}),flexbe_cli.element.register("zone_cards",{onUpdate(t){t.originId===t.id&&this.fixSwiper(t)},fixSwiper(t={}){var e;clearTimeout(this._changeTimer);const i=null==(e=flexbe_cli.components.getInstances(this).filter((t=>"cards"===t.is)))?void 0:e[0],s=i&&i.swiper;if(!s)return!1;if(document.body.contains(s.el)){if(t&&"items_add"===t.reason){const e=s.realIndex,i=t.reasonData.to;let n=e;e+s.params.slidesPerView<=i&&(n=i-s.params.slidesPerView+1),n!==e&&(this._changeTimer=setTimeout((()=>{s.slideTo(n)}),30))}t.styleRendered&&s.update(!1)}else this._changeTimer=setTimeout((()=>{this.fixSwiper(t)}),16)}}),flexbe_cli.element.register("zone",{onInit(){this.setMeta()},onUpdate(){this.setMeta()},setMeta(){const t=this.lastViewPort,e=this.lastVisibility;this.lastViewPort=flexbe_cli.resize.viewportWidth,this.lastVisibility=flexbe_cli.is_admin&&$("body").hasClass("show-hidden"),this.needFixOrder=this.needFixOrder||this.lastViewPort!==t||this.lastVisibility!==e},onResize(){this.inScreen&&this.isVisible&&this.fixElementOrder()},fixElementOrder(){if(this.setMeta(),!this.needFixOrder)return;this.needFixOrder=!1;const t=this.$area.find(".elements-list");t.find("[data-hidden]").length&&t.each(((t,e)=>{const i=$(e).find(".element-item--static"),s=i.filter(":visible");i.removeClass("is-first-child is-last-child"),s.first().addClass("is-first-child"),s.last().addClass("is-last-child")}))}}),flexbe_cli.element.register("zone_gallery",{onUpdate(t={}){setTimeout((()=>{var e;const i=null==(e=flexbe_cli.components.getInstances(this).filter((t=>"cards"===t.is)))?void 0:e[0],s=i&&i.swiper;if(!s)return!1;if(t&&"items_add"===t.reason){const e=s.realIndex,i=t.reasonData.to;let n=e;e+s.params.slidesPerView<=i&&(n=i-s.params.slidesPerView+1),n!==e&&s.slideTo(n)}t.styleRendered&&s.update(!1)}),100)}});const d=".flexbe-product",h={};flexbe_cli.element.register("zone_products",{subscribedOnscroll:!1,onInit(){this.needTipsOptions=this.$area.attr("data-options-need-tips"),this.needAvailableOptions=this.$area.attr("data-options-need-available"),this.sizeOptions=this.$area.attr("data-options-size"),this.articleValue=this.$area.attr("data-article-value"),this.initOptions(),this.createTabs(),this.tabsController.initTabs(),this.navigationType=this.$area.attr("data-navigation-type"),this.navigationLimit=this.$area.attr("data-navigation-limit"),this.$area.removeAttr("data-navigation-type"),this.$area.removeAttr("data-navigation-limit"),flexbe_cli.is_admin||(this.initNavigation(),this.initTips())},onUpdate(t){this.needTipsOptions=this.$area.attr("data-options-need-tips"),this.needAvailableOptions=this.$area.attr("data-options-need-available"),this.sizeOptions=this.$area.attr("data-options-size"),this.articleValue=this.$area.attr("data-article-value"),t.templateRendered&&this.tabsController.initTabs(),this.initOptions(),flexbe_cli.is_admin||this.initTips()},initTips(){this.$area.find(".zone-products__button > .button-toltipster_container").filter("[data-tip]").each(((t,e)=>{flexbe_cli.tip.init(e,{interactive:!1,triggerOpen:{click:!0,touchstart:!1,mouseenter:!0}})}))},onLoad(){this.bindEvents(),this.inScreen&&this.tabsController.swipeAnimationController()},bindEvents(){this.$area.off("touchstart.radio pointerup.radio").on("touchstart.radio pointerup.radio","[data-option-id]",this.clickVariant.bind(this)),this.customSelect()},onBeside(t){t||this.tabsController.resetHash()},onResize(){this.tabsController&&this.tabsController.normalizeLines()},onScreen(t){t&&!this.subscribedOnscroll?(this.subscribedOnscroll=!0,$(document).on(`scroll.${this.id}`,(()=>{requestAnimationFrame((()=>{if(!this.tabsController)return this.subscribedOnscroll=!1,void $(document).off(`scroll.${this.id}`);this.tabsController.swipeAnimationController()}))}))):t||(this.subscribedOnscroll=!1,$(document).off(`scroll.${this.id}`))},clickVariant(t,{$card:e}={}){const i=$(t.currentTarget),s=i.attr("data-option-id");if(i.hasClass("disabled")||s===this.currentOptionId)return;e||(e=i.closest(d)),this.currentOptionId=s;const[n,a]=s.split("_"),o=this.products.find((t=>t.$card.is(e))),r=((t,e={})=>{const i=$.extend(!0,[],t);return i.forEach((t=>{null!=e[t.option_id]&&(t.value_id=+e[t.option_id])})),i})(o.currentVariant.option_values,{[n]:a}),l=o.variants.find((t=>((t,e)=>{let i=!1;return t.length===e.length&&(i=t.every((t=>e.some((e=>t.option_id===e.option_id&&t.value_id===e.value_id)))),i)})(t.option_values,r)));l.visible&&(this.selectVariant(o,l,!0),this.updateTween())},initOptions(){const t=this.$area.find(d);this.inStock=flexbe_cli.vars._group.ecommerce.in_stock_status||"none",this.outStock=flexbe_cli.vars._group.ecommerce.out_of_stock_status||"none",this.outStockAction=flexbe_cli.vars._group.ecommerce.out_of_stock_action||"forbid_preorder",this.products=t.toArray().map((t=>{const e=$(t),i=e.find(".zone-products__content"),s=e.find("[data-variant-id]"),n=e.find("[data-option-id]"),a=e.attr("data-item-id"),o=i.data("options"),r=i.data("variants");return i.removeAttr("data-options").removeAttr("data-variants"),{id:a,$card:e,$variants:s,$options:n,options:o,variants:r}})),this.products.forEach((t=>{if(t.variants){const e=h[`${this.id}_${t.id}`]||t.variants.find((t=>t.is_default&&t.visible))||t.variants.find((t=>t.visible))||t.variants[0];this.selectVariant(t,e)}}))},selectVariant(t,e=t.variants[0],i=!1){const s=e.id,n=t.variants.find((t=>t.id===s)),a=n.option_values;h[`${this.id}_${t.id}`]=e,this.scrollToImage(t,e,i),this.changeContent(t.$card,e),t.currentVariant=n,t.$variants.removeClass("active"),t.$variants.filter(`[data-variant-id="${s}"]`).addClass("active"),t.$options.removeClass("active selected"),a.forEach((({option_id:e,value_id:i})=>{t.$options.filter(`[data-option-id="${e}_${i}"]`).addClass("active selected")})),setTimeout((()=>{t.$options.map(((t,e)=>$(e).find(".option-state")[0])).each(((t,e)=>{e&&(e.innerHTML="")})),flexbe_cli.is_admin||(t.$options.filter("[data-tooltipstered]").each(((t,e)=>{flexbe_cli.tip.destroy(e,{triggerOpen:{click:!0,touchstart:!1,mouseenter:!0}})})),t.$options.filter("[data-tip]").each(((t,e)=>{const i=flexbe_cli.helpers.strings.htmlSpecialChars($(e).data("tip"));flexbe_cli.helpers.strings.htmlSpecialChars($(e).data("radio"))&&i&&flexbe_cli.tip.init(e,{interactive:!1,content:i,triggerOpen:{click:!0,touchstart:!1,mouseenter:!0}})}))),this.setStateOptions(t,a)}))},setStateOptions(t,e){const i=((t,e)=>{let i=[];return 1===e.length?i=t.variants.reduce(((t,e)=>[...t,{options:e.option_values[0],variant:e}]),[]):t.variants.forEach((t=>{for(let s=0;s<e.length;s++){const n=e.filter(((t,e)=>s!==e)),a=t.option_values.filter(((t,e)=>s!==e));JSON.stringify(n)===JSON.stringify(a)&&i.push({options:t.option_values[s],variant:t})}})),i})(t,e);let s="true"===this.needTipsOptions?flexbe_cli.locale.tr("ecommerce.option.locked"):"",n="locked";if("allow_preorder"===this.outStockAction){if("true"===this.needTipsOptions){const t="true"===this.needAvailableOptions?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):"";s="in_stock"===this.outStock?t:flexbe_cli.locale.tr("cart.quantity_status.preorder")}n="","none"===this.outStock&&(s="")}t.$options.removeClass("disabled locked"),i.forEach((e=>{const i=t.$options.filter(`[data-option-id="${e.options.option_id}_${e.options.value_id}"]`);e.variant.visible?e.variant.quantity?this.baseVariant(i,e.variant):this.exceptionVariant({$option:i,exceptionClass:n,tipText:s}):this.exceptionVariant({$option:i,exceptionClass:"disabled",tipText:"true"===this.needTipsOptions?flexbe_cli.locale.tr("ecommerce.option.disabled"):""})}))},exceptionVariant({$option:t,exceptionClass:e,tipText:i}){t.addClass(e),i&&this.addTipOption({$option:t,tipText:i})},baseVariant(t,e){if("none"===this.inStock)return;if("items_in_stock"===this.inStock&&-1!==e.quantity){const i="true"===this.needAvailableOptions&&"true"===this.needTipsOptions?flexbe_cli.locale.tr("cart.quantity_status.items_in_stock",{count:e.quantity}):"";return void this.addTipOption({$option:t,tipText:i})}const i="true"===this.needAvailableOptions&&"true"===this.needTipsOptions?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):"";this.addTipOption({$option:t,tipText:i})},addTipOption({$option:t,tipText:e}){t.each(((t,i)=>{const s=$(i),n=s.find(".option-state"),a=flexbe_cli.helpers.strings.htmlSpecialChars(s.data("tip")),o=flexbe_cli.helpers.strings.htmlSpecialChars(s.data("radio")),r=a&&e?o?`<div class="zone-products-option-tip__title">${a}</div><div class="zone-products-option-tip__status">${e}</div>`:e:o?a:"";n.length?n[0].innerHTML=e:!flexbe_cli.is_admin&&r&&flexbe_cli.tip.init(i,{interactive:!1,content:r,triggerOpen:{click:!0,touchstart:!1,mouseenter:!0}})}))},scrollToImage(t,e,i){null!=t.$card.data("image-slider")&&setTimeout((()=>{const s=t.$card.find(".component-slider")[0];if(null!=s&&s.componentInstance){var n;const t=null!=(n=e.default_image_id)?n:0,a=t&&$(s).find(`[data-uniq-id=${t}]`).closest("[data-real-index]").data("realIndex");null!=a&&s.componentInstance.slideTo(a,i)}}),10)},changeContent(t,e){const i=t.find(".zone-products__article"),s=t.find(".zone-products__available"),n=!e.quantity&&-1!==e.quantity;let a="",o="hide";if(i.removeClass("active"),e.vendor_code){i.addClass("active");let t=flexbe_cli.helpers.strings.htmlSpecialChars(e.vendor_code);"false"===this.articleValue&&(t=flexbe_cli.locale.tr("ecommerce.article",{article:t})),i.html(t)}"none"!==this.inStock&&(a=-1===e.quantity||"in_stock"===this.inStock?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):flexbe_cli.locale.tr("cart::quantity_status::items_in_stock",{count:e.quantity}),o="in_stock"),n&&"none"!==this.outStock?("allow_preorder"===this.outStockAction&&(a="in_stock"===this.outStock?flexbe_cli.locale.tr("cart.quantity_status.in_stock"):flexbe_cli.locale.tr("cart.quantity_status.preorder"),o="in_stock"===this.outStock?"in_stock":"preorder"),"out_of_stock"===this.outStock&&(a=flexbe_cli.locale.tr("cart.quantity_status.out_of_stock"),o="not-available")):n&&(a="",o="hide"),s.html(a).removeClass("hide not-available in_stock preorder").addClass(o)},customSelect(){const t={optionSelector:".zone-products-option__select-item",attrValue:"data-option-id",dropdownClass:`products-select products-select__${this.sizeOptions}`,position:"under",title:!0};this.products.forEach((e=>{const i=e.$card.find(".zone-products-option__select-block");e.$card.find(".dropdown-container").remove(),i.each(((i,s)=>{const n=$(s).closest(".zone-products-option__select-content");new(flexbe_cli.components.getComponentClass("selectInput"))({element:s,config:t,onSelect:t=>{this.clickVariant(t,{$card:e.$card})},onActivate:()=>{n.addClass("active"),n.siblings(".zone-products-option__select-content").removeClass("active")},onCollapse:()=>{n.removeClass("active")}})}));const s=e.$card.find(".dropdown-select__content[data-option-id]");s.length&&e.$options.length&&e.$options.push(s[0])}))},createTabs(){this.tabsController=new r({$area:this.$area,dataAttr:"data-category-id",onSelectTab:this.updateTween.bind(this),id:this.id,classContainer:"self"})},initNavigation(){const t=this.$area.find(".flexbe-products-container"),e=this.navigationType,i=this.navigationLimit;t.each((async(t,s)=>{const n=$(s),a=n.find(".navigation-container");if(!a.length)return;const o=n.find(".flexbe-products"),r=n.find(".navigation-container")[0].getAttribute("data-navigation-cid")||null;"button"===e&&this.initButtonMore({categoryId:r,limit:i,$productsContainer:o,$containerNavigation:a}),"pagination"===e&&this.initPagination({categoryId:r,limit:i,$productsContainer:o,$containerNavigation:a})}))},initButtonMore({categoryId:t,limit:e,$productsContainer:i,$containerNavigation:s}){let n=!1,a=2;s.off(`click.more${t}`).on(`click.more${t}`,".component-button",(async o=>{if(n)return;let r,l,c;n=!0,$(o.currentTarget).addClass("submitting");try{c=await this.getData({categoryId:t,page:a,limit:e,navigation:"button"}),r=c.content,l=c.navigation}catch(o){r="",l=!0,console.error(o)}r&&(i.append(r),flexbe_cli.entity.initArea(this.$area,{templateRendered:!0,reason:"pagination"}),a+=1),$(o.currentTarget).removeClass("submitting"),n=!1,l||s.remove()}))},initPagination({categoryId:t,limit:e,$productsContainer:i,$containerNavigation:s}){let n=!1;s.off(`click.pagination${t}`).on(`click.pagination${t}`,".pagination__items",(async a=>{if(n)return;let o,r,l;const c=a.currentTarget.getAttribute("data-page")||1;n=!0,i.addClass("loading").prepend('<div class="loader"></div>');try{l=await this.getData({categoryId:t,page:c,limit:e,navigation:"pagination"}),o=l.content,r=l.navigation}catch(a){$(".loader").remove(),o=i[0].innerHTML,r=s[0].innerHTML,console.error(a)}i.removeClass("loading"),i[0].innerHTML=o,s[0].innerHTML=r,flexbe_cli.scroll.toElement(this.$root),flexbe_cli.entity.initArea(this.$area,{templateRendered:!0,reason:"pagination"}),n=!1}))},async getData({categoryId:t,page:e,limit:i,navigation:s}){const n=flexbe_cli.group_id,a=flexbe_cli.p_id,o=flexbe_cli.theme_id,r=this.id,l=this.template_id,c=this.is;return new Promise(((d,h)=>{$.ajax({url:"/api/ecommerce/get_data/",type:"GET",dataType:"json",data:{groupId:n,pId:a,entityId:r,themeId:o,templateId:l,is:c,categoryId:t,page:e,limit:i,navigation:s,format:"html"}}).done((t=>{d(t)})).fail((t=>{h(new Error(t.statusText))}))}))}}),flexbe_cli.modal.register("BASIC",{onOpen(){this.$scroll=this.$scroll||this.$area.find(".scroller"),this.$content=this.$content||this.$area.find(".modal-content"),this.$close=this.$close||this.$scroll.find("> .close--outside"),this.dispatchClasses(),this.$scroll.on("scroll.close-check",$.throttle((()=>{this.dispatchClasses()}),60))},onClose(){this.$area.find(".component-form .is_error").removeClass("is_error"),this.$scroll.off("scroll.close-check")},dispatchClasses(){if("mobile"!==flexbe_cli.resize.responsiveMode||!this.$close.length)return;const t=this.$scroll[0].scrollTop,e=this.$content[0].offsetTop,i=this.$close[0].offsetHeight;this.$close.toggleClass("stuck",e-t<i)}}),flexbe_cli.modal.register("FREE",{onScreen(t){t&&this.syncContrasts()},syncContrasts(){const t=this.$area.find(".element-item"),e=this.$area.find("[data-container-contrast]").attr("data-container-contrast");t.removeAttr("data-contrast"),t.not('[data-containment="screen"]').attr("data-contrast",e)}}),flexbe_cli.modal.register("GRID",{onClose(){this.$area.find(".component-form .is_error").removeClass("is_error")}}),flexbe_cli.modal.register("PAY",{types:{},pay_id:"",hash:"",onLoad(){this.$container=this.$modal.find(".action-container"),this.start(),flexbe_cli.events.on("pay",((t,e)=>{e&&"init"===e.action&&this.start()}))},onClose(){try{window.history.pushState(null,null,window.location.pathname)}catch(t){}},start(){const t=this.getPayStatus();if(t){switch(t){case"success":this.showSuccessAlert();break;case"fail":this.showFailAlert();break;case"pay":this.getBill()}setTimeout((()=>{flexbe_cli.events.emit("ui_modal_open",{id:"pay"})}),200)}},getPayStatus(){let t=!1;try{const i=new URL(window.location.href);t=[...i.searchParams.entries()].reduce(((t,[i,s])=>e({},t,{[i]:s})),{})}catch(t){return console.error(t),!1}return!(!t||!t.pay_id)&&(this.pay_id=t.pay_id,this.hash=t.h,t.pay_status||"pay")},getBillData(t){this.pay_id&&$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"payData",pay_id:this.pay_id,hash:this.hash}}).done((e=>{"function"==typeof t&&t(e)}))},getBill(){this.pay_id&&!1!==this.pay_id&&this.getBillData((t=>{if(0===t.status)return setTimeout((()=>{flexbe_cli.events.emit("ui_modal_close",{id:"pay"}),alert(t.error)}),200),!1;this.types=t.pay.support_types,2==+t.pay.pay_status?this.showAlreadyPayed(t.pay):this.cashonly()?this.showCashInstruction(t.pay):this.showBillForm(t.pay)}))},showBillForm(t){this.renderView("bill");const e=this.$container,i=e.find(".pay-action"),s=e.find(".pay-methods-list-inner"),n=e.find(".component-button"),a={cash:"cash",bank_card:"cards",visa:"visa",mastercard:"mastercard",yandex:"yandex",qiwi:"qiwi",webmoney:"webmoney",webmoney_z:"webmoney",webmoney_u:"webmoney",mobile_megafon:"megafon",mobile_beeline:"bee",mobile_mts:"mts",mobile_tele2:"t2",sberbank:"sberbank",bank:"bank",w1:"w1",ibank_robo:"ibank_robo",yandex_kassa:"yandexkassa",yandexkassa:"yandexkassa",bank_company:"bank_company",paypal:"paypal"},o=Object.keys(this.types).reduce(((t,e,i)=>{const s=a[e],n=flexbe_cli.locale.tr(`pay.methods.${e}`);return`${t}<label class="item" title="${n}" for="${e}">\n                <input type="radio" name="form[pay_method]" value="${e}" id="${e}" ${0===i?'checked="checked"':""}>\n                <div class="item-inner">\n                        <span class="check"></span>\n\n                        <span class="icon">\n                            <img class="icon-inner" src="/_s/images/v3/theme/res/pay/${s}.svg" />\n                        </span>\n\n                        <span class="item-name font-size-tiny">${n}</span>\n                </div>\n            </label>`}),"");s.html(o),i.find(".title > span.num").text(t.pay_id),i.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum)),Object.keys(this.types).length<=1&&e.find(".pay-methods .title").hide(),s.on("click",".item",(t=>(t.preventDefault(),$(t.currentTarget).find("input").prop("checked",!0),n.removeClass("disabled"),!1))),n.on("click",(t=>{const e=s.find("input:checked").val();if(!e)return s.removeClass("shake"),setTimeout((()=>{s.addClass("shake")}),30),!1;if("cash"===e)return this.showCashInstruction(),!1;const i=`/mod/pay/?pay_type=${e}&pay_id=${this.pay_id}&h=${this.hash}`;$(t.currentTarget).attr("href",i),flexbe_cli.run.is_mobile&&flexbe_cli.run.is_OSX||$(t.currentTarget).addClass("submitting")}))},showCashInstruction(){this.renderView("cash"),this.types.cash&&this.types.cash.instruction&&this.$container.find(".text").html(this.types.cash.instruction),$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"selectCash",pay_id:this.pay_id,hash:this.hash}})},showAlreadyPayed(t){let e="";t.pay_time_done&&"0"!==t.pay_time_done&&t.pay_time_done_formatted&&(e=t.pay_time_done_formatted),this.renderView("already"),this.$container.find(".text > span.num").text(t.pay_id),this.$container.find(".title > span.num").text(t.pay_id),this.$container.find(".sub > span").text(e),this.$container.find(".price").text(flexbe_cli.locale.formatMoney(t.pay_sum))},showSuccessAlert(){setTimeout((()=>{flexbe_cli.stat.reachGoal(flexbe_cli.stat.goals.pay_done)}),1e3),this.renderView("success")},showFailAlert(){this.renderView("fail"),this.getBillData((t=>{const e=this.$container.find(".pay-action");e.find(".title > span.num").text(t.pay.pay_id),e.find(".price").text(flexbe_cli.locale.formatMoney(t.pay.pay_sum)),this.$container.find(".component-button").off("click").on("click",(()=>{this.getBill()}))}))},cashonly(){return this.types.cash&&1===Object.keys(this.types).length},renderView(t){const e=this.$container,i=this.$area.find(`template[data-id=${t}]`)[0];e.attr("data-view",t).html(i.innerHTML)}}),flexbe_cli.widget.register("ANCHORS",{require:["/_s/lib/anime/anime.min.js?321"],$list:null,onLoad(){this.$list=this.$widget.find(".anchors-list"),this.list="object"==typeof this.$list.data("anchors")&&this.$list.data("anchors").list||[];const t=e({style:1,show_title:0},this.$list.data("anchors"));this.style=t.style,this.show_title=t.show_title,this.$list.removeAttr("data-anchors"),flexbe_cli.run.is_mobile||(this.drawList(),this.bindEvents(),flexbe_cli.is_admin&&(flexbe_cli.events.off("layout_change.anchors").on("layout_change.anchors",((t,e)=>{"block"===e.is&&this.drawList()})),flexbe_cli.events.off("page-settings_update").on("page-settings_update",((t,e)=>{e.p_data.p_data.show_bullets?this.$list.show():this.$list.hide()}))))},check(){const t=flexbe_cli.block.$blocks.not('[data-b-type*="overflow"]');this.list=this.list.filter((e=>!(!e.enabled||!t.closest(`[data-id="${e.id}"]`)[0])))},drawList(){flexbe_cli.block.$blocks.length&&flexbe_cli.vars._page.showBullets||this.$list.hide(),this.check();let t="";flexbe_cli.is_admin&&this.list.length<2?t='<svg style="color: #adadad" width="18" height="98" viewBox="0 0 18 98" xmlns="http://www.w3.org/2000/svg">\n                <g fill="none" fill-rule="evenodd">\n                    <circle opacity=".05" cx="9" cy="5" r="5"/>\n                    <circle opacity=".2" cx="9" cy="25" r="5"/>\n                    <circle opacity=".2" cx="9" cy="73" r="5"/>\n                    <circle opacity=".05" cx="9" cy="93" r="5"/>\n                    <path d="M9 40a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm5.126 9.626h-4.5v4.5H8.34v-4.5h-4.5V48.34h4.5v-4.5h1.286v4.5h4.5v1.286z" opacity=".45"/>\n                </g>\n            </svg>':this.list.length>=2&&(this.list.forEach((e=>{const i=this.show_title&&e.title?` data-title="${e.title}"`:"";t+=`<li${i}><a href="#${e.id}"></a></li>`})),t+='<li class="helper"><a></a></li>'),this.$list.find("ul").html(t),this.$helper=this.$list.find(".helper"),this.animateList()},animateList(){if(!(this.list.length<1)){if(flexbe_cli.is_admin)this.$helper.css({opacity:1,transform:`translateY(${24*this.index}px)`});else{const t=anime({targets:this.$list.find("li").not(this.$helper).get(),duration:350,opacity:[0,1],scale:[.8,1],translateY:[10,0],easing:"easeInOutQuad",autoplay:!1,delay:(t,e)=>30*e,complete:()=>{anime({targets:this.$helper.get(),duration:400,translateY:24*this.index,scale:[2.5,1],opacity:[0,1],easing:"easeInExpo"})}});this.$list.addClass("hide"),setTimeout((()=>{this.$list.removeClass("hide"),t.play()}),800)}this.$list.find("li").removeClass("active").eq(this.index).addClass("active")}},index:0,bindEvents(){flexbe_cli.events.off("entity_event.anchors").on("entity_event.anchors",((t,{type:e,core:i,params:s})=>{"onFocus"===e&&s.state&&"block"===i.is&&this.setBlock(i)})),flexbe_cli.block.$blocks.each(((t,e)=>{const i=e._core;i&&i.inFocus&&this.setBlock(i)})),this.$list.on("click","li",(t=>{if(!$(t.target).is("a"))return $(t.currentTarget).find("[href]").trigger("click"),t.preventDefault(),!1}))},setBlock(t){let e=this.index,i="#6a6a6a";const s=t.container||t.$area.find(".container")[0];if(s){const e=t.container.getAttribute("data-contrast");i=e?"light"===e?"#FFF":"#1B1B1C":getComputedStyle(s).color}this.$list.css("color",i),this.list.some(((i,s)=>+i.id==+t.id&&(e=s,!0))),e=Math.max(0,Math.min(this.list.length-1,e)),e!==this.index&&(this.animate(e),this.index=e)},animate(t){if(this.$list.find("li").removeClass("active"),this.$list.find("li").eq(t).addClass("active"),1==+this.style){const e=24*t,i=t-this.index>0?12:-12;anime.remove(this.$helper[0]),anime({targets:this.$helper[0],translateY:e-i,scaleY:2.5,scaleX:.6,duration:100,easing:"easeInQuad",complete:()=>{anime({targets:this.$helper[0],translateY:e,scaleY:1,scaleX:1,duration:100,easing:"easeOutQuad"})}})}}});const u=t=>{const e=_(t);return e&&[3,6,8].includes(e.length)};function p(t){return/^\s*(?:linear-gradient|repeat-linear-gradient)\(.*\)/i.test(t)}function m(t){return/^rgba\((?:\s*0*(?:\d{1,2}(?:\.\d+)?(?:\s*%)?|\.\d+\s*%|100(?:\.0*)?\s*%|(?:1\d{2}|2[0-4]\d|25[0-5])(?:\.\d+)?)\s*,){3}\s*0*(?:\.\d+|1?)\s*\)$/.test(t)}function f(t){return/^rgb\((?:\s*0*(?:\d{1,2}(?:\.\d+)?(?:\s*%)?|\.\d+\s*%|100(?:\.0*)?\s*%|(?:1\d{2}|2[0-4]\d|25[0-5])(?:\.\d+)?)\s*,?){3}\)$/.test(t)}function g(t,e=!0){var i;let s=null;if(function(t){return!f(t)&&!m(t)&&(t=_(t),!!u(t)&&/^#?([\da-f]{3}|[\da-f]{6})$/i.test(t))}(t)||function(t){return!f(t)&&!m(t)&&(t=b(t),!!u(t)&&/^#?[\da-f]{8}$/i.test(t))}(t))s=function(t,e=!1){const i={type:"rgb",r:0,g:0,b:0};if(!t)return!1;t=_(t);const s=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i.exec(t);if(s){let t=parseInt(s[4],16)/255;i.r=parseInt(s[1],16),i.g=parseInt(s[2],16),i.b=parseInt(s[3],16),Number.isNaN(t)||(t=parseFloat(t.toFixed(3)),i.a=t,i.type="rgba")}if(!e){let t=`${i.type}(`;return t+=`${i.r}, ${i.g}, ${i.b}`,"rgba"===i.type&&(t+=`, ${i.a}`),t+=")",t}return i}(t,!0);else{if(!m(t)&&!f(t))return!1;{const i=(t=t.replace(/^rgb\(/,"").replace(/^rgba\(/,"").replace(/\)$/,"")).split(","),n=e?+i[3]:null;s={r:+i[0],g:+i[1],b:+i[2]},n&&(s.a=n)}}return(.2126*s.r/255+.7152*s.g/255+.0722*s.b/255)*(null!=(i=s.a)?i:1)}function b(t=""){return"string"!=typeof t?t:String(t).replace(/[^\da-f]/gi,"").slice(0,8)}function _(t){return"string"!=typeof t||(3===(t=b(t)).length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),7===t.length&&(t+=t[6]),8===t.length&&/ff$/i.test(t)&&(t=t.slice(0,6))),t}function v(t){if(p(t)){const e=function(t){if(p(t)){var e;const i=+(+((null==(e=(t=t.trim().replace(";","")).match(/(?:(-?\d+\.?\d*)deg\s*,\s?)/i))?void 0:e[1])||"180")).toFixed(),s=t.match(/(#([\dA-Fa-f]{6}|[\dA-Fa-f]{8}|[\dA-Fa-f]{3})|(rgba?\([^)]+\)))/g);t.replace(/(#([\da-f]{6}|[\da-f]{8}|[\da-f]{3})|(rgba?\([^)]+\)))/g,"");return{colors:s,angle:i,fillability:t.match(/[\d.-]*%/g).map((t=>+t.replace("%",""))),value:t}}return null}(t),i=Array(e.fillability.length).fill(0);i[0]=e.fillability[0],i[i.length-1]=100-e.fillability[e.fillability.length-1];const s=e.fillability.reduce(((t,e,i,s)=>{if(void 0===s[i+1])return t;const n=(s[i+1]-e)/2;return t[i]+=n,t[i+1]+=n,t}),i);let n;if(s.reduce(((t,e,i,s)=>{const n=Math.abs(s[i+1]-e);return n>t?n:t}),0)<10)n=function(t){const e=t.map((t=>g(t))),i=e.reduce(((t,e)=>e<t?e:t),1);let s=e.findIndex((t=>t===i));return s=-1!==s?s:0,t[s]}(e.colors);else{const t=s.reduce(((t,e,i,s)=>e>s[t]?i:t),0);n=e.colors[t]}return n}return null}const y="hidden-mobile",x="mobile-navigation--created",w="nav-header-controls--cart",C="nav-header-controls--burger",A=".b_block",k=".element-item",S=".mobile-navigation",T=".header-wrapper",I=".widget-list .cart-button",L=".header-cart-button",M=".nav-header",E=".nav-header-content",z=".nav-header-controls",F=".nav-menu",D=(t,e=!1)=>{let i=$(t);if(!i.is(k)){const t=i.closest(k);i=t.length?t:i}i.toggleClass(y,!e)};flexbe_cli.widget.register("MENU01",{created:{},navbarStyle:null,onLoad(){requestAnimationFrame((()=>this.createWidget()));let t=flexbe_cli.resize.responsiveMode;$(window).on("resized",(()=>{const e=flexbe_cli.resize.responsiveMode;t!==e&&"mobile"===e&&this.createWidget(),t=e}))},onMsg(t){"postProcessSave"===t&&this.createWidget(t)},createWidget(){this.clickEvent="click",this.navbarStyle=!1,this.navmenuCreated=!1,this.created={},this.contrast="dark",this.background="#FFFFFF";const t=flexbe_cli.block.$list,e=$(A),i=t.find(T);if(D(i,!0),D(e,!0),this.mobileHeadersMap=e.not('[data-hidden="mobile"]').toArray().map((t=>{const e=$(t),i=e.find(T),s=i.hasClass("floating-header"),n=!!i.data("mobile-menu"),a=i.data("widget-color"),o=i.data("widget-contrast"),r=i.closest("[data-contrast]").attr("data-contrast");return{$block:e,$header:i,isFixed:s,hasMobileMenu:n,widgetColor:a,widgetContrast:o,contrast:r}})).filter((t=>t.hasMobileMenu)),this.mobileHeadersMap.length){var s;const t=null!=(s=this.mobileHeadersMap.find((t=>t.isFixed)))?s:this.mobileHeadersMap[0];"contrast"===t.widgetColor?(this.contrast=t.contrast,this.background="dark"===this.contrast?"#ffffff":"#1b1b1c"):(this.background=t.widgetColor,this.contrast=t.widgetContrast)}if(this.$headers=$(this.mobileHeadersMap.map((t=>t.$header[0]))),this.$nav=this.$area.find(S),this.$navbar=this.$area.find(M),this.$navmenu=this.$area.find(F),this.shouldBeFixed=!flexbe_cli.is_admin&&this.mobileHeadersMap.some((t=>t.isFixed)),this.fillNavMenu(),this.fillNavbar(),this.$navbar.css("background-color",""),this.$navmenu.css("background-color",""),i.closest(".b_block").each(((t,e)=>{e._core&&e._core.updateTween()})),this.navbarStyle){if(this.background){this.$navbar.css("background",this.background),this.$navmenu.css("background",this.background);const t=$("head"),e=t.find('meta[name="theme-color"]'),i=p(this.background)?v(this.background):this.background;e.length?e.attr("content",i):t.append(`<meta name="theme-color" content="${i}"/>`)}if(this.created.logo&&flexbe_cli.run.is_android){const t=this.$nav.find(".component-logo-img"),e=t.css("background-image");t.css("background-image","none"),setTimeout((()=>{t.css("background-image",e)}),50)}this.contrast?this.$nav.attr("data-contrast",this.contrast):this.color&&this.$nav.css("color",this.color),this.shouldBeFixed=this.shouldBeFixed||"round"===this.navbarStyle,this.$nav.toggleClass("menu-fixed",this.shouldBeFixed),this.$nav.toggleClass("menu-static",!this.shouldBeFixed),this.animationMobileShow()}this.navmenuCreated&&(flexbe_cli.entity.initArea(this.$nav),flexbe_cli.events.off("ui_mobilemenu_open").on("ui_mobilemenu_open",(()=>{this.openMenu()})),flexbe_cli.events.off("ui_mobilemenu_close").on("ui_mobilemenu_close",(()=>{this.$nav.length&&[!0,"true"].includes(this.$nav.attr("data-opened"))&&this.closeMenu()})))},animationMobileShow(){const t=$("body");this.$nav.removeClass("header-style-round header-style-panel"),this.$nav.addClass(`${x} header-style-${this.navbarStyle}`),this.$headers.each(((t,e)=>{$(e).find(".element-item").toArray().every((t=>t.classList.contains("hidden-mobile")))&&D($(e).closest(".header-area, .b_block"),!1);$(e).find(".elements-list").each(((t,e)=>{$(e).find(".element-item").toArray().every((t=>t.classList.contains("hidden-mobile")))&&D($(e).closest(".elements-list"),!1)}))})),t.removeClass("is-mobile-menu--round is-mobile-menu--panel"),this.navbarStyle&&t.addClass(`is-mobile-menu--${this.navbarStyle}`)},fillNavbar(){const t=this,{created:e,$navbar:i,$headers:s,navmenuCreated:n}=t,a=i.find(E),o=i.find(z);a.empty(),o.empty();const r=[],l=[];!function(){const i=$(I).eq(0),s=$(L).eq(0);if(s.length||i.length){e.cart=!0,l.push("cart");const n=i.find(".cart-button-icon"),a=i.find(".cart-button-count"),r=s.find(".header-cart-button-icon"),c=s.find(".header-cart-button-count");let d,h,u;d=r.length?r.html():n.html(),c.length?(h=c.css("color"),u=c.css("background-color"),"rgba(0, 0, 0, 0)"===u&&(h="rgb(255, 255, 255, 1)",u="rgb(234, 127, 84, 1)")):(h=a.css("color"),u=a.css("background-color"));const p=`\n                        <li class="${w}">\n                            <div class="cart-button">\n                                <svg class="cart-button-icon">\n                                    ${d}\n                                </svg>\n                                <div class="cart-button-count" style="color: ${h}; background: ${u}">0</div>\n                            </div>\n                        </li>`;t.$cart=$(p),o.append(t.$cart),s.length||t.background||(t.color=i.css("color"),t.background=i.css("background-color"))}else e.cart=!1;if(e.cart){const e=t.$area.find(".cart-button"),i=e.find(".cart-button-count"),s=flexbe_cli.ecommerce.cartStore.getCount();o.toggleClass("cart-empty",!s),i.text(s),t.$cart.on(t.clickEvent,(()=>{t.toggleMenu(!1),flexbe_cli.events.emit("ui_cart_open")})),setTimeout((()=>{flexbe_cli.ecommerce.cartStore.on("dispatch.mobilemenu",((t,{name:s})=>{const n=flexbe_cli.ecommerce.cartStore.getCount();o.toggleClass("cart-empty",!n),i.text(n),"addItem"===s&&(e.addClass("blink"),setTimeout((()=>{e.removeClass("blink")}),300))}))}))}e.cart}(),function(){n?(t.$burger=$(`<li class="${C}"><i></i><i></i><i></i></li>`),o.append(t.$burger),l.push("burger"),t.$burger.on(t.clickEvent,(()=>{t.toggleMenu()})),e.burger=!0):e.burger=!1;e.burger}(),this.$nav.attr("data-enabled",!!l.length),l.length&&function(){const t=s.find(".component-logo").eq(0);if(t.length){const i=40/Math.max(.25,t.innerHeight()/t.innerWidth()),s=t.clone();e.logo=!0,s.css({fontSize:"",maxWidth:`${i}px`}),a.append(s),r.push("logo"),D(t,!1)}else e.logo=!1;e.logo}(),r.length&&l.length||l.length>1?this.navbarStyle="panel":0===r.length&&1===l.length?(this.navbarStyle="round",this.shouldBeFixed=!0):this.navbarStyle=!1},fillNavMenu(){const{created:t,$navmenu:e,$headers:i}=this;return["header_menu","header_text","header_contacts","header_social","header_button","header_html","header_cart","header_spacer"].forEach((s=>{const n=e.find(`[data-element=${s}]`),a=i.find(`[data-e-id="${s}"]`),o=a.length,r=n.hasClass("nav-menu-item--cart"),l=n.hasClass("nav-menu-item--spacer");if(n.empty(),o){if(!r&&!l){const t=a.clone();t.find('[class^="editor-"]').remove(),t.attr("data-cloned",!0),n.append(t),n.find("[data-direction]").attr("data-direction","column"),n.find("[data-direction-adaptive]").attr("data-direction-adaptive","column"),n.find(".element-content").removeClass("justify-content-center justify-content-end").addClass("justify-content-start")}D(a,!1),t[s]=t[s]?t[s]+o:o}})),this.navmenuCreated=Object.keys(t).length,this.navmenuCreated},toggleMenu(t){this[(t=void 0===t?!(t=[!0,"true"].includes(this.$nav.attr("data-opened"))):!!t)?"openMenu":"closeMenu"]()},openMenu(){this.isOpen=!0,this.$area.addClass("show"),this.$nav.outerHeight(),this.$nav.attr("data-opened",!0),this.$navmenu.addClass("active"),this.$burger&&this.$burger.addClass("active"),flexbe_cli.scroll.scrollLock.lock(),this.setAreaSize(),this._onOpen(),$(window).on("resized.mobilemenu",(()=>{this.setAreaSize()})),"mobile"===flexbe_cli.resize.responsiveMode&&($("body").addClass("is-widget-open").css("background",this.background),this.shouldBeFixed||$("body, html").scrollTop(0))},closeMenu(){this.isOpen=!1,"mobile"===flexbe_cli.resize.responsiveMode&&($("body").removeClass("is-widget-open").css("background",""),Array.from(this.$navmenu.find(".folder-item")).forEach((t=>{$(t).removeClass("show"),$(t.lastElementChild).slideUp(0)}))),this.$area.removeClass("show"),this.$area.css("height",""),this.$nav.attr("data-opened",!1),this.$navmenu.removeClass("active"),this.$burger&&this.$burger.removeClass("active"),flexbe_cli.scroll.scrollLock.unlock(),$(window).off("resized.mobilemenu"),this._onClose()},setAreaSize(){const t=this.isOpen?`${flexbe_cli.resize.viewportHeight}px`:"";this.$area.css("height",t)}});const O={$container:".widget-data",$list:".order-list",$button:".cart-button",$buttonCount:".cart-button-count",$form:".component-form",$formButton:".form-field-submit",$count:".cart-checkout-count__value",$shipping:".cart-checkout-shipping__price",$subtotal:".cart-checkout-subtotal__price",$total:".cart-checkout-summary__price",$delivery:".cart-checkout-delivery",$minTotal:".cart-min-total",$shippingNotFix:".cart-shipping__not-fix-total",$untilFree:".cart-delivery-free"},H={key:"in_stock",class:"in-stock",title:"cart::quantity_status::in_stock"},P={key:"items_in_stock",class:"items-in-stock",title:"cart::quantity_status::items_in_stock"},B={key:"preorder",class:"preorder",title:"cart::quantity_status::preorder"},W={key:"out_of_stock",class:"out-of-stock",title:"cart::quantity_status::out_of_stock"},R={key:"items_left_in_stock",class:"items-left",title:"cart::quantity_status::items_left_in_stock"},q={key:"not_available",class:"not-available",title:"cart::quantity_status::not_available"},V={key:"unknown",class:"",title:""};function j(t){return null!=t.productId&&null!=t.variantId}function U(t){return t.quantity===1/0||-1===t.quantity||null==t.quantity}function N(t){return!t.quantity||t.count>t.quantity}function G(t){return t.quantity>0&&!N(t)}function Y(t){const i=flexbe_cli.locale.tr.bind(flexbe_cli.locale),{inStockStatus:s,outOfStockStatus:n,allowPreorder:a}=flexbe_cli.ecommerce.cartSettings;if(!j(t))return e({},H,{title:i(H.title),show:!0});if(t.hidden)return e({},q,{title:i(q.title),show:!0});if(U(t)||G(t)&&"in_stock"===s||N(t)&&a&&"in_stock"===n)return e({},H,{title:i(H.title),show:!0});if(G(t)&&"items_in_stock"===s)return e({},P,{title:i(P.title,{count:+t.quantity}),show:!0});if(N(t)){if(a&&"preorder"===n)return e({},B,{title:i(B.title),show:!0});if(!a&&!t.quantity)return e({},W,{title:i(W.title),show:!0});if(!a&&t.quantity>0)return e({},R,{title:i(R.title,{count:t.quantity}),show:!0})}return e({show:!1},V)}async function X(){const t=flexbe_cli.ecommerce.cartStore.getList();if(!t.some((t=>j(t))))return t;const i=t.map((t=>t.productId)).filter((t=>t));return new Promise(((s,n)=>$.ajax({url:"/api/ecommerce/products_cart/",type:"GET",dataType:"json",data:{productsIds:i,groupId:flexbe_cli.group_id}}).done((i=>{if(!Array.isArray(i))return n(new Error("loadProductsList: empty result"));const a=t.map((t=>{const s=e({},t),n=i.find((e=>e.id===t.productId)),a=n&&n.variants.find((e=>e.id===t.variantId));var o;return s.hidden=j(t)&&(!n||!a||!n.visible||!a.visible),a&&(s.img=function(t,e){let i=e.images||[],s=t.img;return i.length?i[0]:(i=t.images||[],e.default_image_id&&i.length?s=i.find((t=>t.unq_id===e.default_image_id))||i[0]:i.length&&(s=i[0]),s)}(n,a),s.quantity=U(o=a)?1/0:o.quantity,s.title=n.name,s.price=a.price,s.vendorCode=a.vendor_code,s.optionsInfo=a.optionsInfo),s}));s(a)})).fail((t=>{n(t)}))))}let Q,Z;function J(){if(flexbe_cli.is_admin){if((window.parent.flexbe.modal.visible||[]).length)return!1}return!0}async function K(){const t=await X();flexbe_cli.ecommerce.cartStore.dispatch("updateList",t),clearTimeout(Q),Q=setTimeout((()=>K()),12e5)}const tt="cart_changes",et='<svg class="arrow" viewBox="0 0 16 16"><path d="M3 8H13M13 8L10 5M13 8L10 11" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';function it(t,e){const i=$(`\n        <div class="m_modal m_${tt}" data-is="modal" data-id="${tt}" data-m-id="cart_changes">\n            <div class="modal-data" data-overlay="true">\n                <div class="component-bg bg-color" data-type="color"><div class="overlay"></div></div>\n\n                <div class="modal-content" data-contrast="dark">\n                    ${function({title:t}){return`\n        <div class="modal-title">\n            <svg width="16" height="16" viewBox="0 0 16 16">\n                <path d="M7.00006 1C7.00006 0.447715 7.44778 0 8.00006 0C8.55235 0 9.00006 0.447715 9.00006 1V2.10002C11.2823 2.56329 13.0001 4.58104 13.0001 7V11H13L15 13H9.7325C9.90267 13.2942 10.0001 13.6357 10.0001 14C10.0001 15.1046 9.10463 16 8.00006 16C6.89549 16 6.00006 15.1046 6.00006 14C6.00006 13.6357 6.09746 13.2942 6.26763 13H1L3.00006 10.9999V7C3.00006 4.58104 4.71782 2.56329 7.00006 2.10002V1ZM5.00006 11H11.0001V7C11.0001 5.34315 9.65692 4 8.00006 4C6.34321 4 5.00006 5.34315 5.00006 7V11Z" fill="currentColor"/>\n            </svg>\n\n            <span class="text">${t}</span>\n            <a class="close close-times"></a>\n        </div>`}({title:t.title})}\n                    ${function(t){return`<div class="products-list">${t.list.map((t=>function(t){const e=t.changes||[],i=e.reduce(((t,e)=>(t+=`<div class="variant-change variant-change--${e.isBad?"bad":"good"}">`,e.message&&(t+=`<div class="variant-change__message">${e.message}</div>`),null!=e.from&&null!=e.to&&(t+=`<div class="variant-change__info">\n                <span class="from">${e.from}</span>\n                ${et}\n                <span class="to">${e.to}</span>\n            </div>`),t+="</div>")),"");return`\n        <div class="product-item">\n            <div class="product-title">${t.title}</div>\n            <div class="variant-title">${t.variant}</div>\n            <div class="variant-changes variant-changes--${e.length>1?"many":"one"}">${i}</div>\n        </div>`}(t))).join("")}</div>`}(t)}\n\n                    ${e.showActions?function(){const{locale:t}=flexbe_cli;return`\n        <div class="modal-footer">\n            <div class="button filled" data-action="apply">\n                <div class="text">${t.tr("cart::price_confirmation::apply")}</div>\n            </div>\n\n            <div class="button" data-action="cancel">\n                <div class="text">${t.tr("cart::price_confirmation::cancel")}</div>\n            </div>\n        </div>`}():""}\n                </div>\n            </div>\n        </div>\n    `);return i.on("click","[data-action]",(t=>{const i=t.currentTarget.getAttribute("data-action");"apply"===i&&e.onConfirm&&e.onConfirm(),"cancel"===i&&e.onCancel&&e.onCancel()})),i}async function st(t,i){const{modal:s,entity:n,events:a}=flexbe_cli;return new Promise((o=>{let r;const l=function(t){const{locale:e}=flexbe_cli;return{title:flexbe_cli.locale.tr("cart::variant_confirmation::title"),list:t.filter((t=>j(t))).map((t=>{const i=Y(t),s={title:t.title,variant:t.optionsInfo?t.optionsInfo.map((t=>t.name)).join(", "):"",changes:[]};return["not_available","out_of_stock"].includes(i.key)&&s.changes.push({isBad:!0,type:"not_available",message:i.title}),t.price!==t.orderPrice&&s.changes.push({isBad:t.orderPrice<t.price,type:"price",message:e.tr("cart::variant_confirmation::error::price_changed"),from:e.formatMoney(t.orderPrice,{freeLabel:!1}),to:e.formatMoney(t.price,{freeLabel:!1})}),"items_left_in_stock"===i.key&&s.changes.push({isBad:!0,type:"count",message:e.tr("cart::variant_confirmation::error::quantity_changed"),from:`${t.count} ${e.tr("cart::item")}`,to:`${t.quantity} ${e.tr("cart::item")}`}),s})).filter((t=>t.changes.length))}}(t),c=()=>{r&&flexbe_cli.events.emit("ui_modal_close",{id:r.id})},d=()=>(c(),i.onConfirm&&i.onConfirm(),o(!0));if(!l.list.length)return d();const h=it(l,e({},i,{onConfirm:d,onCancel:()=>(c(),i.onCancel&&i.onCancel(),o(!1))}));s.$list.append(h),r=n.initArea(h[0]),setTimeout((()=>{a.emit("ui_modal_open",{id:r.id,options:e({hash:!1,rise:!0},i,{onClose:()=>{i.onClose&&i.onClose(),h.remove()}})})}),30)}))}let nt;var at={isOpened:!1,cartInited:!1,get cartStore(){return flexbe_cli.ecommerce.cartStore},get deliveryStore(){return flexbe_cli.ecommerce.deliveryStore},get list(){return this.cartStore.getList()||[]},get changedPrices(){return this.list.filter((t=>j(t)&&null!=t.orderPrice&&t.orderPrice!==t.price))},get count(){var t;return null!=(t=this.cartStore.getCount())?t:0},get subtotal(){var t;return null!=(t=this.cartStore.getTotal())?t:0},get total(){return this.subtotal+this.deliveryActivePrice},get deliveryMethods(){var t;return(null==(t=this.deliveryStore)?void 0:t.methods)||[]},get deliveryActiveMethod(){var t;return(null==(t=this.deliveryStore)?void 0:t.getActive())||{}},get deliveryActivePrice(){if(!(this.cartSettings.hasDelivery&&this.deliveryStore))return 0;return this.deliveryStore.getPrice().current},initCart(t=O){t=e({},O,t),this.cartInited=!0;const i=this.$widget,s=i.find(t.$container);this.$container=s,this.$list=this.$widget.find(t.$list),this.$itemTemplate=this.$itemTemplate||this.$list.find("template").clone(),this.$button=i.find(t.$button),this.$buttonCount=i.find(t.$buttonCount),this.$form=i.find(t.$form),this.$formButton=this.$form.find(t.$formButton),this.$count=i.find(t.$count),this.$total=i.find(t.$total),this.$delivery=i.find(t.$delivery),this.$minTotal=i.find(t.$minTotal),this.$subtotal=i.find(t.$subtotal),this.$shipping=i.find(t.$shipping),this.$shippingNotFix=i.find(t.$shippingNotFix),this.$untilFree=i.find(t.$untilFree),this.cartSettings=e({},flexbe_cli.ecommerce.cartSettings,{hasDelivery:this.$form.find('[data-type="delivery"]').length>0,showVendorCode:!!s.data("showVendorCode"),showInStockStatuses:!!s.data("showInStockStatuses"),showChangedPrices:!!s.data("showChangedPrices")}),this.deliveryStore&&(this.arrMinDelivery=this.deliveryMethods.filter((t=>t.useMinTotal&&this.cartSettings.minTotal<+t.prices[0].from)).map((t=>(t.$item=this.$form.find(`[data-delivery="${t.id}"]`),t)))),this.initCartEvents(),this.renderCart()},initCartEvents(){flexbe_cli.events.off("ui_cart_open.cart-widget").on("ui_cart_open.cart-widget",(async()=>{await this.open()})),flexbe_cli.events.off("ui_cart_close.cart-widget").on("ui_cart_close.cart-widget",(()=>{this.close()})),setTimeout((()=>{this.cartStore.on("dispatch.cart-widget",((t,{name:e})=>{["updateList","resetList","removeItem","updateCount","normalizeListItems"].includes(e)?this.renderCart():"addItem"===e&&this.onItemsAdd()})),this.deliveryStore&&this.deliveryStore.on("dispatch.cart-widget",((t,{name:e})=>{"selectMethod"===e&&this.renderCart()}))}),10)},initFormComponent(){const t=flexbe_cli.components.initComponent(this.$form[0]);if(!t)return void console.error("Form not founded in cart!");this.formInstance=t;const e=t=>{const e=this.cartSettings.hasDelivery&&this.deliveryActiveMethod,i=function(t){return t.filter((t=>t.count&&!t.hidden)).map((t=>({id:t.id,type:t.type,count:t.count,price:t.price,title:t.title||"",img:t.img&&{id:t.img.id,ext:t.img.ext,unq_id:t.img.unq_id},product_id:t.productId,variant_id:t.variantId})))}(t);return e&&i.push({id:`delivery:${e.id}`,type:"delivery",title:e.title,price:e.price.current,count:1}),i};t.defineBeforeSend((async()=>{if(flexbe_cli.is_admin)return!1;this.cartStore.dispatch("normalizeListItems",this.list,{price:!0,count:!0,unavailable:!0});const i=this.list;return i&&i.length?(t.addItems(e(i)),!0):(console.error(new Error("Product list is empty")),!1)})),t.defineOnRequestError((async i=>{const s=i.status;if(500===s)return alert(flexbe.locale.tr("main::error::network_cart")),!1;if(409===s){const i=await X();this.cartStore.dispatch("updateList",i);if(!await st(i,{showActions:!0}))return!1;if(this.cartStore.dispatch("normalizeListItems",i,{price:!0,count:!0,unavailable:!0}),!i.length)return console.error("Product list is empty"),!1;t.addItems(e(i)),t.sendForm()}return!0})),t.defineAfterSent((()=>{this.close(),this.cartStore.dispatch("purchase")}))},onItemsAdd(){this.$button.removeClass("blink"),this.$button.outerWidth(),this.$button.addClass("blink"),this.renderCart(),this.cartSettings.autoOpen&&1===this.count&&!this.isOpened&&setTimeout((()=>this.open()),200)},open(){!this.isOpened&&this.cartInited&&(this.isOpened=!0,flexbe_cli.is_admin?this.$container.addClass("is-editor"):/cart/.test(window.location.hash)||(/^#{1,2}/.test(window.location.hash)&&(nt=window.location.hash),flexbe_cli.lockPopstate=!0,window.history.pushState(null,null,"#cart"),flexbe_cli.lockPopstate=!1),this.renderCart(),$(document.body).addClass("is-cart-open"),this.$area.addClass("show"),this.$container.addClass("show"),this.$container.hasClass("noanimate")||this.$container.outerHeight(),this.$area.addClass("fade-in"),this.$container.addClass("fade-in"),this.$container.removeClass("noanimate"),this.$area.removeClass("noanimate"),this._onOpen(),flexbe_cli.scroll.scrollLock.lock(),flexbe_cli.events.emit("cart_opened"),K())},close(){if(this.isOpened&&this.cartInited){if(this.isOpened=!1,$(window).off("keyup.cart_esc_close"),this.$area.removeClass("show fade-in"),this.$container.removeClass("fade-in"),this.$area.addClass("fade-out"),this.$container.addClass("fade-out"),setTimeout((()=>{this.$area.removeClass("fade-out"),this.$container.removeClass("fade-out show noanimate"),$(document.body).removeClass("is-cart-open")}),350),this.formInstance.removeFieldsErrors(),/cart/.test(window.location.hash)){const t=nt&&nt!==window.location.hash?nt:"#";flexbe_cli.lockPopstate=!0,window.history.replaceState(null,null,t),flexbe_cli.lockPopstate=!1,nt=null}flexbe_cli.scroll.scrollLock.unlock(),flexbe_cli.events.emit("cart_closed"),this._onClose(),flexbe_cli.is_admin||(this.list.forEach((t=>this.cancelRemoveItemDelayed(t.id))),this.cartStore.dispatch("updateList",this.list.filter((t=>0!==t.count))))}},renderCart(){const t=this.count;this.renderButton(),this.isOpened&&(this.$count.text(t),this.$subtotal.text(flexbe_cli.locale.formatMoney(this.subtotal)),flexbe_cli.locale.animateNumber({target:this.$total,to:this.total,asMoney:!0,freeLabel:!1}),this.renderList(),this.manageDeliveryBlock(),this.managePriceChangedBlock(),this.manageForm()),"function"==typeof this.onRenderCart&&this.onRenderCart()},renderButton(){const t=this.count;this.$buttonCount.text(t),this.$button.attr("data-count",t);$(".header-cart-button-holder").length>0?this.$button.attr("data-hidden","true"):flexbe_cli.is_admin?this.$button.attr("data-hidden","false"):this.$button.attr("data-hidden",this.isOpened||0===t)},renderList(){const t=this.list,e=t.reduce(((t,e)=>t+this.renderItem(e)),"");!function(t){const e=t.find("input:focus")[0];Z={},e&&(Z.id=e.closest("[data-id]").getAttribute("data-id"),Z.selectionStart=e.selectionStart,Z.selectionEnd=e.selectionEnd)}(this.$list),this.$container.toggleClass("cart-is-empty",0===t.length),this.$list.html(e),function(t){const{id:e,selectionStart:i,selectionEnd:s}=Z||{};if(e){const n=t.find(`[data-id="${e}"] .item-count__input`)[0];n&&(n.focus(),n.setSelectionRange(i,s)),Z={}}}(this.$list),setTimeout((()=>function(t){if(!flexbe_cli.tip||flexbe_cli.is_admin)return null;const e=t.is("[data-tip]")?t:t.find("[data-tip]");return e.length?(e.each(((t,e)=>flexbe_cli.tip.init(e))),e):null}(this.$list))),this.listRendered=!0},renderItem(t){const e=this.$itemTemplate.html(),i=Y(t);i.show&&["in_stock","items_in_stock"].includes(i.key)&&(i.show=this.cartSettings.showInStockStatuses);const s=this.cartSettings.showVendorCode&&null!=t.vendorCode,n=this.cartSettings.allowPreorder,a=n||U(t),o=!t.hidden&&(a||t.count<t.quantity),r=!t.hidden&&t.count>0,l=N(t)&&!n;let c="";return n||(!t.quantity||/out_of_stock|not_available/.test(i.key)?c=flexbe_cli.locale.tr("cart::out_of_stock_tip"):t.count>=t.quantity&&(c=flexbe_cli.locale.tr("cart::quantity_status::items_left_in_stock",{count:t.quantity}))),function(t,e={}){const i=Object.keys(e),s=Object.values(e);return new Function(...i,`return \`${t}\`;`)(...s)}(e,{id:t.id,productId:t.productId,variantId:t.variantId,title:t.title,count:t.count,price:t.price,sum:t.count*(t.price||0),img:flexbe_cli.helpers.image.getImageUrl(t.img,200),vendorCode:s?t.vendorCode:null,optionsInfo:t.optionsInfo?t.optionsInfo.map((t=>t.name)).join(", "):"",status:i,priceText:null==t.price?flexbe_cli.locale.tr("ecommerce::card::price::empty"):flexbe_cli.locale.formatMoney(t.price),sumText:null==t.price?flexbe_cli.locale.tr("ecommerce::card::price::empty"):flexbe_cli.locale.formatMoney(t.count*t.price),plusTip:c,canIncrease:o,canDecrease:r,inputError:l,minCount:0,maxCount:a?1/0:t.quantity})},updateItemCount(t,e){const i=t.id;if(this.cartStore.dispatch("updateCount",{id:i,count:e}),this.cancelRemoveItemDelayed(i),!t.count){const e=Y(t);e&&/out_of_stock|not_available/.test(e.key)?this.removeItem(i):this.removeItemDelayed(i)}},removeItem(t){flexbe_cli.is_admin||(this.cancelRemoveItemDelayed(t),this.cartStore.dispatch("removeItem",t))},removeItemDelayed(t,e=5e3){this[`removeTimer_${t}`]=setTimeout((()=>{this.removeItem(t)}),e)},cancelRemoveItemDelayed(t){clearTimeout(this[`removeTimer_${t}`]),delete this[`removeTimer_${t}`]},manageDeliveryBlock(){if(!this.deliveryStore)return;const t=this.subtotal,{minTotal:e,hasDelivery:i}=this.cartSettings,s=this.deliveryStore.getPrice(),{notFixedPrice:n,currentFormatted:a}=s,o=e-t,r=e>s.minTotal,l=r&&o>0;if(e&&this.$minTotal.length&&(this.$minTotal.attr("data-hidden",!l),this.$minTotal.find(".min-total__total").text(flexbe_cli.locale.formatMoney(e,{freeLabel:!0})),flexbe_cli.locale.animateNumber({target:this.$minTotal.find(".min-total__count"),to:o,asMoney:!0,freeLabel:!1})),this.arrMinDelivery.length&&this.arrMinDelivery.forEach((e=>{const i=e.prices[0].from>t;e.$item.toggleClass("form-field-delivery-item--blocked",i)})),this.$shipping.text(a),this.$shippingNotFix.attr("data-hidden",!n),this.$delivery.attr("data-hidden",i?"false":"true"),i&&this.$untilFree.length){const t=s.untilMinTotal/s.minTotal*100,e=s.untilFree/s.freeFrom*100,i=s.untilMinTotal?t:e,n=(s.untilFree||s.untilMinTotal)&&(!(o>0)||!r);this.$untilFree.attr("data-hidden",!n),this.$untilFree.toggleClass("show-min-total",!!s.untilMinTotal),this.$untilFree.find(".progress-path").attr("stroke-dashoffset",i),flexbe_cli.locale.animateNumber({target:this.$untilFree.find(".delivery-free__count"),to:s.untilFree,asMoney:!0,freeLabel:!1}),flexbe_cli.locale.animateNumber({target:this.$untilFree.find(".delivery-min-total__count"),to:s.untilMinTotal,asMoney:!0,freeLabel:!1})}},managePriceChangedBlock(){if(!this.cartSettings.showChangedPrices)return;const t=this.changedPrices,e=this.$container.find(".cart-products-changed"),i=e.find(".cart-products-changed__notice"),s=e.find(".cart-products-changed__close"),n=e.find(".cart-products-changed__more");e.attr("data-hidden",0===t.length),i.text(flexbe_cli.locale.tr("cart::price_confirmation::items_price_changed",{count:t.length})),n.off("click").on("click",(async()=>{await st(this.changedPrices,{showActions:!0})&&this.cartStore.dispatch("normalizeListItems",this.list,{price:!0})})),s.off("click").on("click",(()=>{this.cartStore.dispatch("normalizeListItems",this.list,{price:!0})}))},manageForm(){this.formInstance||this.initFormComponent(),this.manageFormButton()},manageFormButton(){var t,e;const i=flexbe_cli.locale;let s=!1,n="";const a=this.list,o=this.subtotal,r=0===a.filter((t=>0!==t.count)).length,l=null==(t=this.deliveryStore)?void 0:t.getPrice(),c=null==(e=this.formInstance.$delivery)?void 0:e.length,d=(null==l?void 0:l.minTotal)||0,h=this.cartSettings.minTotal,u=h>d,p=this.cartSettings.allowPreorder,m=a.some((t=>t.hidden||!p&&N(t)));r?s=!0:u&&h>o?(s=!0,n=`${i.tr("cart::min_total_tip")} ${i.formatMoney(h,{freeLabel:!1})}`):!u&&d>o&&c?(s=!0,n=`${i.tr("cart::min_total_delivery_tip")} ${i.formatMoney(d,{freeLabel:!1})}`):m&&(s=!0,n=`${i.tr("cart::some_items_not_available_tip")}`),s?this.formInstance.disableSubmit(n):this.formInstance.enableSubmit()}};const ot=Object.defineProperties(at,Object.getOwnPropertyDescriptors({onReady(){this.initCart(),this.initUIEvents(),this.updated&&this.isOpened&&(this.$area.addClass("show"),this.$container.addClass("show fade-in noanimate"))},initUIEvents(){let t,e;$(document).off("keyup.cart_esc_close").on("keyup.cart_esc_close",(t=>{27===t.which&&J()&&!flexbe_cli.modal.$list.hasClass("rise")&&this.close()})),this.$container.off("click.close-button").on("click.close-button","a.close",(t=>{J()&&t.target===t.currentTarget&&this.close()})),this.$widget.off(".close-overlay").on("pointerup.close-overlay pointerdown.close-overlay",'[data-overlay="true"]',(i=>{J()&&("pointerdown"===i.type?(t=i.target,e=i.target.clientWidth<=i.clientX):i.target!==t||i.target!==i.currentTarget||e||(t=null,this.close()))})),this.$widget.off("click.cart-button").on("click.cart-button",".cart-button",(()=>{this.isOpened?this.close():this.open()})),this.$widget.off("click.cart-actions").on("click.cart-actions","[data-action]",(t=>{const e=$(t.currentTarget),i=e.attr("data-action"),s=e.hasClass("disabled"),n=e.closest("li").attr("data-id"),a=this.list.find((t=>t.id===n));n&&a&&!s&&("remove"===i?this.removeItem(n):"+"!==i&&"-"!==i||this.updateItemCount(a,i))})),this.$widget.off(".cart-input").on("input.cart-input blur.cart-input","input.count",(t=>{const e=t.currentTarget.value,i=$(t.currentTarget).closest("li").attr("data-id"),s=e?Math.abs(+e):0,n="blur"===t.type||"focusout"===t.type,a=this.list.find((t=>t.id===i));a&&a.count!==s&&(s||n)&&this.updateItemCount(a,s)}))}}));flexbe_cli.widget.register("CART",ot)}();
